<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TTS</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            /* Primary Colors */
            --primary-blue: #6b7280;
            --primary-purple: #4b5563;
            --primary-gradient: linear-gradient(135deg, #6b7280, #4b5563);
            
            /* Status Colors */
            --success: #48bb78;
            --warning: #ed8936;
            --error: #f56565;
            --info: #6b7280;
            
            /* Neutral Colors */
            --gray-50: #f9fafb;
            --gray-100: #f3f4f6;
            --gray-200: #e5e7eb;
            --gray-300: #d1d5db;
            --gray-400: #9ca3af;
            --gray-500: #6b7280;
            --gray-600: #4b5563;
            --gray-700: #374151;
            --gray-800: #1f2937;
            --gray-900: #111827;
            
            /* Text Colors */
            --text-primary: #1a202c;
            --text-secondary: rgba(26, 32, 44, 0.7);
            --text-tertiary: rgba(26, 32, 44, 0.5);
            
            /* Background Colors */
            --bg-primary: #ffffff;
            --bg-secondary: rgba(255, 255, 255, 0.8);
            --bg-overlay: rgba(255, 255, 255, 0.1);
            --bg-sidebar: rgba(255, 255, 255, 0.95);
            
            /* Spacing */
            --space-xs: 4px;
            --space-sm: 8px;
            --space-md: 12px;
            --space-lg: 16px;
            --space-xl: 20px;
            --space-2xl: 24px;
            --space-3xl: 32px;
            
            /* Shadows */
            --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.05);
            --shadow-md: 0 4px 6px rgba(0, 0, 0, 0.07);
            --shadow-lg: 0 10px 15px rgba(0, 0, 0, 0.1);
            --shadow-xl: 0 20px 25px rgba(0, 0, 0, 0.1);
            --shadow-2xl: 0 25px 50px rgba(0, 0, 0, 0.25);
            
            /* Border Radius */
            --radius-sm: 6px;
            --radius-md: 8px;
            --radius-lg: 12px;
            --radius-xl: 16px;
            --radius-2xl: 20px;
            
            /* Transitions */
            --transition-fast: 0.15s ease;
            --transition-normal: 0.3s ease;
            --transition-slow: 0.5s ease;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--primary-gradient);
            min-height: 100vh;
            color: var(--text-primary);
            overflow-x: hidden;
        }

        /* Main Layout */
        .app-container {
            display: flex;
            min-height: 100vh;
        }

        /* Sidebar */
        .sidebar {
            width: 280px;
            background: var(--bg-sidebar);
            backdrop-filter: blur(20px);
            box-shadow: var(--shadow-xl);
            transition: all var(--transition-normal);
            z-index: 1000;
            position: relative;
        }

        .sidebar.collapsed {
            width: 80px;
        }

        .sidebar.collapsed .logo-text,
        .sidebar.collapsed .nav-section-title,
        .sidebar.collapsed .nav-item-text {
            opacity: 0;
            visibility: hidden;
        }

        .sidebar.collapsed .nav-item {
            justify-content: center;
        }

        .sidebar.collapsed .nav-icon {
            margin-right: 0;
        }

        .sidebar-header {
            padding: var(--space-2xl);
            border-bottom: 1px solid var(--gray-200);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .sidebar-toggle {
            background: none;
            border: none;
            color: var(--text-secondary);
            font-size: 18px;
            cursor: pointer;
            padding: 8px;
            border-radius: 6px;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .sidebar-toggle:hover {
            background: var(--gray-100);
            color: var(--text-primary);
        }

        .logo {
            display: flex;
            align-items: center;
            gap: var(--space-md);
        }

        .logo-icon {
            width: 40px;
            height: 40px;
            background: var(--primary-gradient);
            border-radius: var(--radius-lg);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 700;
            font-size: 16px;
        }

        .logo-text {
            font-size: 20px;
            font-weight: 700;
            color: var(--text-primary);
        }

        .sidebar-nav {
            padding: var(--space-lg) 0;
        }

        .nav-section {
            margin-bottom: var(--space-2xl);
        }

        .nav-section-title {
            padding: var(--space-sm) var(--space-2xl);
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            color: var(--gray-500);
        }

        .nav-item {
            display: flex;
            align-items: center;
            padding: var(--space-md) var(--space-2xl);
            color: var(--text-secondary);
            text-decoration: none;
            transition: all var(--transition-fast);
            position: relative;
            margin: 0 var(--space-lg);
            border-radius: var(--radius-lg);
        }

        .nav-item:hover {
            background: var(--gray-100);
            color: var(--primary-blue);
        }

        .nav-item.active {
            background: var(--primary-gradient);
            color: white;
            box-shadow: var(--shadow-md);
        }

        .nav-icon {
            width: 20px;
            height: 20px;
            margin-right: var(--space-md);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* Main Content */
        .main-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        /* Header */
        .header {
            background: var(--bg-secondary);
            backdrop-filter: blur(20px);
            padding: var(--space-md) var(--space-3xl);
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
            display: flex;
            align-items: center;
            justify-content: space-between;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: var(--space-lg);
        }

        .breadcrumb {
            display: flex;
            align-items: center;
            gap: var(--space-sm);
            color: var(--text-secondary);
            font-size: 14px;
        }

        .breadcrumb-separator {
            color: var(--gray-400);
        }

        .page-title {
            font-size: 24px;
            font-weight: 700;
            color: var(--text-primary);
        }

        .header-right {
            display: flex;
            align-items: center;
            gap: var(--space-lg);
        }

        .header-actions {
            display: flex;
            align-items: center;
            gap: var(--space-md);
        }

        .action-btn {
            width: 40px;
            height: 40px;
            border: none;
            background: white;
            border-radius: var(--radius-lg);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all var(--transition-fast);
            position: relative;
        }

        .action-btn:hover {
            background: var(--gray-100);
            transform: translateY(-1px);
        }

        .user-avatar {
            color: #6b7280;
            font-weight: 600;
            cursor: pointer;
            transition: color var(--transition-fast);
            white-space: nowrap;
            font-size: 14px;
        }

        /* Content Area */
        .content-area {
            flex: 1;
            padding: var(--space-md);
            overflow-y: auto;
        }

        /* Workflow Section */
        .workflow-section {
            background: var(--bg-primary);
            border-radius: var(--radius-xl);
            padding: var(--space-sm) var(--space-2xl);
            margin-bottom: var(--space-md);
            box-shadow: var(--shadow-md);
        }

        .workflow-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--space-sm);
        }

        .workflow-title-container {
            display: flex;
            align-items: center;
            gap: var(--space-lg);
        }

        .workflow-title {
            font-size: 22px;
            font-weight: 700;
            color: var(--text-primary);
            margin: 0;
        }

        .workflow-subtitle {
            font-size: 14px;
            color: var(--text-secondary);
            margin: 0;
        }

        .workflow-actions {
            display: flex;
            gap: var(--space-sm);
        }

        .btn {
            padding: 8px 16px;
            border: none;
            border-radius: var(--radius-lg);
            font-size: 13px;
            font-weight: 500;
            cursor: pointer;
            transition: all var(--transition-fast);
            display: inline-flex;
            align-items: center;
            gap: 6px;
            text-decoration: none;
            line-height: 1.2;
        }

        .btn-primary {
            background: var(--primary-gradient);
            color: white;
            box-shadow: var(--shadow-md);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }

        .btn-secondary {
            background: white;
            color: var(--text-primary);
            border: 1px solid var(--gray-300);
        }

        .btn-secondary:hover {
            background: var(--gray-50);
            border-color: var(--gray-400);
        }

        .btn-success {
            background: var(--success);
            color: white;
        }

        .btn-success:hover {
            background: #38a169;
            transform: translateY(-1px);
        }

        .btn-danger {
            background: var(--error);
            color: white;
        }

        .btn-danger:hover {
            background: #e53e3e;
            transform: translateY(-1px);
        }

        /* Circular Tabs */
        .tab-navigation {
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: relative;
            margin-bottom: var(--space-lg);
            padding: var(--space-sm) 0;
        }

        .tab-line {
            position: absolute;
            top: 50%;
            left: 0;
            right: 0;
            height: 2px;
            background: var(--gray-200);
            transform: translateY(-50%);
            z-index: 1;
        }

        .tab-fill {
            height: 100%;
            background: var(--primary-gradient);
            width: 0%;
            transition: width 0.8s ease;
            border-radius: 1px;
        }

        /* 탭 간 연결 라인 스타일 */
        .tab-connection-line {
            position: absolute;
            top: 50%;
            height: 3px;
            background: var(--primary-gradient);
            transform: translateY(-50%);
            z-index: 2;
            border-radius: 2px;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .tab-connection-line.active {
            opacity: 1;
        }

        /* 각 탭별 연결 라인 색상 */
        .tab-connection-line.services-to-speakers {
            background: linear-gradient(90deg, #3b82f6, #8b5cf6);
        }

        .tab-connection-line.services-to-channels {
            background: linear-gradient(90deg, #3b82f6, #f59e0b);
        }

        .tab-connection-line.services-to-servers {
            background: linear-gradient(90deg, #3b82f6, #ef4444);
        }

        .tab-connection-line.speakers-to-services {
            background: linear-gradient(90deg, #8b5cf6, #3b82f6);
        }

        .tab-connection-line.speakers-to-channels {
            background: linear-gradient(90deg, #8b5cf6, #f59e0b);
        }

        .tab-connection-line.speakers-to-servers {
            background: linear-gradient(90deg, #8b5cf6, #ef4444);
        }

        .tab-connection-line.channels-to-services {
            background: linear-gradient(90deg, #f59e0b, #3b82f6);
        }

        .tab-connection-line.channels-to-speakers {
            background: linear-gradient(90deg, #f59e0b, #8b5cf6);
        }

        .tab-connection-line.channels-to-servers {
            background: linear-gradient(90deg, #f59e0b, #ef4444);
        }

        .tab-connection-line.servers-to-services {
            background: linear-gradient(90deg, #ef4444, #3b82f6);
        }

        .tab-connection-line.servers-to-speakers {
            background: linear-gradient(90deg, #ef4444, #8b5cf6);
        }

        .tab-connection-line.servers-to-channels {
            background: linear-gradient(90deg, #ef4444, #f59e0b);
        }

        /* 선택된 테이블 행 스타일 */
        .data-table tbody tr.selected {
            background-color: #e3f2fd !important;
            border-left: 4px solid #2196f3;
        }

        /* 연결상세보기 모달 스타일 */
        .selected-entity-header {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
            border: 1px solid #e9ecef;
        }

        .selected-entity-header h6 {
            color: #495057;
            margin-bottom: 15px;
            font-weight: 600;
        }

        .entity-info {
            background: white;
            border-radius: 6px;
            padding: 15px;
            border: 1px solid #dee2e6;
        }

        .connection-diagram-section {
            display: flex;
            flex-direction: column;
            height: 50vh;
            min-height: 350px;
        }

        .diagram-controls {
            margin-bottom: 10px;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 6px;
            border: 1px solid #e9ecef;
        }

        .diagram-controls h6 {
            margin: 0 0 10px 0;
            color: #495057;
        }

        .control-group {
            display: flex;
            align-items: center;
            gap: 8px;
            flex-wrap: wrap;
        }
        
        .control-group .btn {
            margin: 2px;
            font-size: 12px;
            padding: 4px 8px;
        }
        
        /* 연결상세보기 모달 버튼 색상 및 상태 스타일 */
        #connectionDetailModal .btn-outline-primary {
            border-color: #6c757d;
            color: #6c757d;
        }
        
        #connectionDetailModal .btn-outline-primary:hover {
            background-color: #6c757d;
            border-color: #6c757d;
            color: white;
        }
        
        /* 서비스 버튼 */
        #connectionDetailModal #toggle-services.btn-outline-primary {
            border-color: #3b82f6;
            color: #3b82f6;
        }
        
        #connectionDetailModal #toggle-services.btn-outline-primary:hover {
            background-color: #3b82f6;
            border-color: #3b82f6;
            color: white;
        }
        
        #connectionDetailModal #toggle-services.btn-outline-secondary {
            background-color: #3b82f6;
            border-color: #3b82f6;
            color: white;
        }
        
        /* 스피커 버튼 */
        #connectionDetailModal #toggle-speakers.btn-outline-primary {
            border-color: #8b5cf6;
            color: #8b5cf6;
        }
        
        #connectionDetailModal #toggle-speakers.btn-outline-primary:hover {
            background-color: #8b5cf6;
            border-color: #8b5cf6;
            color: white;
        }
        
        #connectionDetailModal #toggle-speakers.btn-outline-secondary {
            background-color: #8b5cf6;
            border-color: #8b5cf6;
            color: white;
        }
        
        /* 채널 버튼 */
        #connectionDetailModal #toggle-channels.btn-outline-primary {
            border-color: #f59e0b;
            color: #f59e0b;
        }
        
        #connectionDetailModal #toggle-channels.btn-outline-primary:hover {
            background-color: #f59e0b;
            border-color: #f59e0b;
            color: white;
        }
        
        #connectionDetailModal #toggle-channels.btn-outline-secondary {
            background-color: #f59e0b;
            border-color: #f59e0b;
            color: white;
        }
        
        /* 서버 버튼 */
        #connectionDetailModal #toggle-servers.btn-outline-primary {
            border-color: #ef4444;
            color: #ef4444;
        }
        
        #connectionDetailModal #toggle-servers.btn-outline-primary:hover {
            background-color: #ef4444;
            border-color: #ef4444;
            color: white;
        }
        
        #connectionDetailModal #toggle-servers.btn-outline-secondary {
            background-color: #ef4444;
            border-color: #ef4444;
            color: white;
        }
        
        /* 초기화 버튼 스타일 */
        #connectionDetailModal .btn-outline-secondary:not([id^="toggle-"]) {
            border-color: #6c757d;
            color: #6c757d;
        }
        
        #connectionDetailModal .btn-outline-secondary:not([id^="toggle-"]):hover {
            background-color: #6c757d;
            border-color: #6c757d;
            color: white;
        }
        
        /* 버튼 아이콘 색상 상속 */
        #connectionDetailModal .btn i {
            color: inherit;
        }

        .diagram-area {
            flex: 1;
            border: 1px solid #dee2e6;
            border-radius: 6px;
            background: white;
            overflow: hidden;
            min-height: 250px;
            position: relative;
        }

        #connectionDiagram {
            width: 100%;
            height: 100%;
        }

        /* D3.js 노드 스타일 */
        .node {
            cursor: pointer;
        }

        .node circle {
            stroke: #333;
            stroke-width: 2px;
        }

        .node text {
            font-size: 18px;
            font-weight: 700;
            text-anchor: middle;
            dominant-baseline: middle;
            fill: white;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
        }

        /* 채널 노드 텍스트는 검정색으로 강제 설정 */
        .node[data-type="channels"] text,
        .node[data-type="channel"] text {
            fill: black !important;
            text-shadow: 2px 2px 4px rgba(255,255,255,0.9) !important;
        }

        .link {
            stroke: #999;
            stroke-opacity: 0.6;
            stroke-width: 2px;
        }

        .node.services circle {
            fill: #3b82f6;
        }

        .node.speakers circle {
            fill: #8b5cf6;
        }

        .node.channels circle {
            fill: #f59e0b;
        }

        .node.servers circle {
            fill: #ef4444;
        }

        .data-table tbody tr:hover {
            background-color: #f5f5f5;
        }

        .tab-step {
            position: relative;
            z-index: 2;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: var(--space-sm);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .tab-step:hover {
            transform: translateY(-2px);
        }

        .tab-step:hover .tab-circle {
            transform: scale(1.1);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        }

        .tab-step:hover .tab-title {
            color: var(--primary-blue);
            font-weight: 700;
        }

        .tab-circle {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            font-weight: 600;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .tab-circle:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }

        .tab-circle.completed {
            background: var(--success);
            color: white;
            box-shadow: var(--shadow-md);
        }

        .tab-circle.active {
            background: var(--primary-gradient);
            color: white;
            box-shadow: var(--shadow-lg);
            animation: pulse 2s infinite;
            border-color: rgba(107, 114, 128, 0.3);
        }

        .tab-circle.pending {
            background: white;
            color: var(--gray-400);
            border: 2px solid var(--gray-200);
        }

        /* 탭별 색상 적용 */
        .tab-circle.services {
            border-color: #3b82f6;
            color: #3b82f6;
        }

        .tab-circle.speakers {
            border-color: #8b5cf6;
            color: #8b5cf6;
        }

        .tab-circle.channels {
            border-color: #f59e0b;
            color: #f59e0b;
        }

        .tab-circle.servers {
            border-color: #ef4444;
            color: #ef4444;
        }

        /* 활성 상태 - 아이콘 전체 해당 색상으로 채우기 */
        .tab-circle.services.active {
            background: #3b82f6;
            color: white;
            border-color: #3b82f6;
        }

        .tab-circle.speakers.active {
            background: #8b5cf6;
            color: white;
            border-color: #8b5cf6;
        }

        .tab-circle.channels.active {
            background: #f59e0b;
            color: white;
            border-color: #f59e0b;
        }

        .tab-circle.servers.active {
            background: #ef4444;
            color: white;
            border-color: #ef4444;
        }

        /* 완료 상태 - 해당 색상으로 채우기 */
        .tab-circle.services.completed {
            background: #3b82f6;
            color: white;
            border-color: #3b82f6;
        }

        .tab-circle.speakers.completed {
            background: #8b5cf6;
            color: white;
            border-color: #8b5cf6;
        }

        .tab-circle.channels.completed {
            background: #f59e0b;
            color: white;
            border-color: #f59e0b;
        }

        .tab-circle.servers.completed {
            background: #ef4444;
            color: white;
            border-color: #ef4444;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .tab-info {
            text-align: center;
            min-width: 100px;
        }

        .tab-title {
            font-size: 13px;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: var(--space-xs);
            transition: all 0.3s ease;
        }

        .tab-title:hover {
            color: var(--primary-blue);
            font-weight: 700;
        }

        .tab-status {
            font-size: 10px;
            padding: 2px 6px;
            border-radius: 10px;
            margin-top: 2px;
            font-weight: 500;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            display: inline-block;
        }

        /* 탭별 최대 너비 설정 */
        #services-status {
            max-width: 120px; /* 서비스명: 20자 */
        }

        #speakers-status {
            max-width: 150px; /* 스피커 코드들: 25자 */
        }

        #channels-status {
            max-width: 150px; /* 채널명들: 25자 */
        }

        #servers-status {
            max-width: 180px; /* 서버명들: 30자 */
        }

        .tab-status.completed {
            background: rgba(72, 187, 120, 0.1);
            color: var(--success);
        }

        .tab-status.active {
            background: rgba(107, 114, 128, 0.1);
            color: var(--primary-blue);
        }

        .tab-status.pending {
            background: var(--gray-100);
            color: var(--gray-500);
        }

        /* Tab Actions */
        .tab-actions {
            display: flex;
            justify-content: flex-end;
            gap: var(--space-md);
            margin-bottom: var(--space-lg);
        }

        /* Deploy Modal Styles */
        .deploy-section {
            margin-bottom: 20px;
        }

        .deploy-section h4 {
            margin: 0 0 15px 0;
            color: #333;
            font-size: 16px;
            font-weight: 600;
        }

        .deploy-items {
            max-height: 300px;
            overflow-y: auto;
            border: 1px solid #ddd;
            border-radius: 6px;
            background: white;
        }

        .deploy-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 15px;
            border-bottom: 1px solid #eee;
            transition: all 0.2s ease;
            cursor: pointer;
        }

        .deploy-item:last-child {
            border-bottom: none;
        }

        .deploy-item:hover {
            background: #f8f9fa;
        }

        .deploy-item.selected {
            background: #e3f2fd;
            border-color: #2196f3;
        }

        .deploy-item input[type="checkbox"],
        .deploy-item input[type="radio"] {
            width: 18px;
            height: 18px;
            margin: 0;
        }

        .deploy-item-info {
            flex: 1;
        }

        .deploy-item-name {
            font-weight: 600;
            color: #333;
            margin-bottom: 4px;
            font-size: 14px;
        }

        .deploy-item-details {
            font-size: 12px;
            color: #666;
            line-height: 1.4;
        }

        .deploy-ready-btn {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 500;
            cursor: pointer;
        }

        .deploy-ready-btn:hover {
            background: #c3e6cb;
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: var(--space-lg);
        }

        /* Progress Steps */
        .progress-steps {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: var(--space-3xl);
            padding: var(--space-2xl);
            background: var(--gray-50);
            border-radius: var(--radius-xl);
        }

        .step {
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
            flex: 1;
        }

        .step:not(:last-child)::after {
            content: '';
            position: absolute;
            top: 15px;
            right: -50%;
            width: 100%;
            height: 2px;
            background: var(--gray-300);
            z-index: 1;
        }

        .step.completed:not(:last-child)::after {
            background: var(--success);
        }

        .step-circle {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: var(--gray-300);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: 600;
            margin-bottom: var(--space-sm);
            position: relative;
            z-index: 2;
        }

        .step.active .step-circle {
            background: var(--primary);
        }

        .step.completed .step-circle {
            background: var(--success);
        }

        .step-label {
            font-size: 12px;
            color: var(--text-muted);
            text-align: center;
        }

        .step.active .step-label {
            color: var(--text-primary);
            font-weight: 500;
        }

        /* Wizard Steps */
        .wizard-step {
            display: block;
        }

        /* Stats Row */
        .stats-row {
            display: flex;
            align-items: center;
            gap: var(--space-xl);
            background: white;
            border-radius: var(--radius-xl);
            padding: var(--space-lg) var(--space-2xl);
            box-shadow: var(--shadow-md);
            margin-bottom: var(--space-2xl);
        }

        .stats-label {
            font-size: 16px;
            font-weight: 600;
            color: var(--text-primary);
            white-space: nowrap;
        }

        .stats-items {
            display: flex;
            align-items: center;
            gap: var(--space-xl);
            flex-wrap: wrap;
        }

        .stats-item {
            display: flex;
            align-items: center;
            gap: var(--space-sm);
        }

        .stats-icon {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            color: white;
        }

        .stats-icon.success {
            background: var(--success);
        }

        .stats-icon.warning {
            background: var(--warning);
        }

        .stats-icon.error {
            background: var(--error);
        }

        .stats-icon.info {
            background: var(--info);
        }

        .stats-text {
            font-size: 14px;
            font-weight: 500;
            color: var(--text-primary);
            max-width: 300px;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        .stats-text span {
            font-weight: 600;
        }

        .stats-text:hover {
            white-space: normal;
            overflow: visible;
            position: relative;
            z-index: 10;
            background: white;
            padding: 4px 8px;
            border-radius: 4px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.15);
        }

        /* Table Actions */
        .table-actions {
            display: flex;
            justify-content: flex-start;
            gap: var(--space-md);
            padding: var(--space-lg) var(--space-xl);
            border-top: 1px solid var(--gray-200);
        }

        /* Content Card */
        .content-card {
            background: white;
            border-radius: var(--radius-xl);
            padding: var(--space-3xl);
            box-shadow: var(--shadow-md);
            margin-bottom: var(--space-lg);
        }

        .content-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--space-2xl);
        }

        .content-title-container {
            display: flex;
            align-items: center;
            gap: var(--space-lg);
        }

        .content-title {
            font-size: 20px;
            font-weight: 600;
            color: var(--text-primary);
            margin: 0;
        }

        .content-subtitle {
            font-size: 14px;
            color: var(--text-secondary);
            margin: 0;
        }

        .content-actions {
            display: flex;
            gap: var(--space-sm);
        }

        /* Search Section */
        .search-section {
            display: flex;
            gap: var(--space-md);
            align-items: center;
            margin-bottom: var(--space-2xl);
            flex-wrap: wrap;
        }

        .search-input {
            flex: 1;
            min-width: 250px;
            padding: var(--space-md) var(--space-lg);
            border: 2px solid var(--gray-200);
            border-radius: var(--radius-lg);
            font-size: 14px;
            transition: border-color var(--transition-fast);
            background: white;
        }

        .search-input:focus {
            outline: none;
            border-color: var(--primary-blue);
        }

        /* Data Table */
        .table-container {
            background: white;
            border-radius: var(--radius-xl);
            overflow: hidden;
            box-shadow: var(--shadow-md);
        }

        .data-table {
            width: 100%;
            border-collapse: collapse;
        }

        .data-table th {
            background: var(--gray-50);
            padding: var(--space-lg) var(--space-xl);
            text-align: left;
            font-weight: 600;
            font-size: 14px;
            color: var(--text-primary);
            border-bottom: 1px solid var(--gray-200);
        }

        .data-table td {
            padding: var(--space-lg) var(--space-xl);
            border-bottom: 1px solid var(--gray-100);
            font-size: 14px;
            color: var(--text-secondary);
        }

        .data-table tr:hover {
            background: var(--gray-50);
        }

        .data-table tr:last-child td {
            border-bottom: none;
        }

        /* Status Badge */
        .status-badge {
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .status-active {
            background: rgba(72, 187, 120, 0.1);
            color: var(--success);
        }

        .status-inactive {
            background: rgba(245, 101, 101, 0.1);
            color: var(--error);
        }

        .status-pending {
            background: rgba(237, 137, 54, 0.1);
            color: var(--warning);
        }

        .status-online {
            background: rgba(72, 187, 120, 0.1);
            color: var(--success);
        }

        .status-offline {
            background: rgba(156, 163, 175, 0.1);
            color: var(--gray-500);
        }

        /* Action Buttons */
        .action-buttons {
            display: flex;
            gap: var(--space-sm);
        }

        .btn-sm {
            padding: 6px 12px;
            font-size: 12px;
        }

        /* Pagination */
        .pagination {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-top: var(--space-2xl);
            gap: var(--space-sm);
        }

        .page-btn {
            padding: var(--space-sm) var(--space-md);
            border: 1px solid var(--gray-300);
            background: white;
            cursor: pointer;
            border-radius: var(--radius-md);
            font-size: 14px;
            transition: all var(--transition-fast);
            color: var(--text-secondary);
        }

        .page-btn:hover {
            background: var(--primary-blue);
            color: white;
            border-color: var(--primary-blue);
        }

        .page-btn.active {
            background: var(--primary-blue);
            color: white;
            border-color: var(--primary-blue);
        }

        .page-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            z-index: 9999;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            backdrop-filter: blur(5px);
        }

        .modal-content {
            background: white;
            margin: 5% auto;
            padding: 0;
            border-radius: var(--radius-xl);
            width: 90%;
            max-width: 600px;
            box-shadow: var(--shadow-2xl);
            animation: modalSlideIn 0.3s ease;
        }

        @keyframes modalSlideIn {
            from {
                opacity: 0;
                transform: translateY(-50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .modal-header {
            background: var(--primary-gradient);
            color: white;
            padding: var(--space-2xl) var(--space-3xl);
            border-radius: var(--radius-xl) var(--radius-xl) 0 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-title-container {
            display: flex;
            align-items: center;
            gap: var(--space-lg);
        }

        .modal-title {
            font-size: 20px;
            font-weight: 600;
            margin: 0;
        }

        .modal-subtitle {
            margin: 0;
            font-size: 14px;
            color: #9ca3af;
        }

        .close {
            background: none;
            border: none;
            color: white;
            font-size: 24px;
            cursor: pointer;
            padding: 0;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: background var(--transition-fast);
        }

        .close:hover {
            background: rgba(255,255,255,0.2);
        }

        .modal-body {
            padding: var(--space-3xl);
        }
        
        /* 연결상세보기 모달 본문 패딩 조정 */
        #connectionDetailModal .modal-body {
            padding: 20px;
        }

        .form-group {
            margin-bottom: var(--space-xl);
        }

        .form-label {
            display: block;
            margin-bottom: var(--space-sm);
            font-weight: 500;
            color: var(--text-primary);
            font-size: 14px;
        }

        .required {
            color: var(--error);
        }

        .radio-group {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }

        .radio-label {
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
            font-size: 14px;
        }

        .radio-label input[type="radio"] {
            margin: 0;
        }

        .checkbox-label {
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
            font-size: 14px;
        }

        .checkbox-label input[type="checkbox"] {
            margin: 0;
        }

        .form-control {
            width: 100%;
            padding: var(--space-md) var(--space-lg);
            border: 2px solid var(--gray-200);
            border-radius: var(--radius-lg);
            font-size: 14px;
            transition: border-color var(--transition-fast);
            background: white;
        }

        .form-control:focus {
            outline: none;
            border-color: var(--primary-blue);
        }

        .form-select {
            width: 100%;
            padding: var(--space-md) var(--space-lg);
            border: 2px solid var(--gray-200);
            border-radius: var(--radius-lg);
            font-size: 14px;
            background: white;
            cursor: pointer;
        }

        .modal-footer {
            padding: 12px 20px;
            border-top: 1px solid var(--gray-200);
            display: flex;
            justify-content: flex-end;
            gap: var(--space-md);
            margin-top: auto;
        }
        
        /* 서비스 등록 모달 스타일 */
        .service-register-modal {
            max-width: 600px;
            width: 90%;
        }
        
        .service-register-info {
            background: #e3f2fd;
            border: 1px solid #bbdefb;
            border-radius: 6px;
            padding: 12px 16px;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .service-register-info i {
            color: #1976d2;
            font-size: 16px;
        }
        
        .service-register-info span {
            font-weight: 600;
            color: #1976d2;
        }
        
        .service-register-info small {
            color: #666;
            margin-left: auto;
        }
        
        .input-group {
            display: flex;
            gap: 8px;
        }
        
        .input-group .form-control {
            flex: 1;
        }
        
        .radio-group, .checkbox-group {
            display: flex;
            flex-wrap: wrap;
            gap: 16px;
            margin-top: 8px;
        }
        
        .radio-item, .checkbox-item {
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
            font-size: 14px;
        }
        
        .radio-item input[type="radio"],
        .checkbox-item input[type="checkbox"] {
            display: none;
        }
        
        .radio-custom, .checkbox-custom {
            width: 18px;
            height: 18px;
            border: 2px solid #ddd;
            border-radius: 50%;
            display: inline-block;
            position: relative;
            transition: all 0.2s ease;
        }
        
        .checkbox-custom {
            border-radius: 4px;
        }
        
        .radio-item input[type="radio"]:checked + .radio-custom {
            border-color: #007bff;
            background: #007bff;
        }
        
        .radio-item input[type="radio"]:checked + .radio-custom::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 8px;
            height: 8px;
            background: white;
            border-radius: 50%;
        }
        
        .checkbox-item input[type="checkbox"]:checked + .checkbox-custom {
            border-color: #007bff;
            background: #007bff;
        }
        
        .checkbox-item input[type="checkbox"]:checked + .checkbox-custom::after {
            content: '✓';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: white;
            font-size: 12px;
            font-weight: bold;
        }
        
        .quality-settings {
            display: flex;
            gap: 16px;
            margin-top: 8px;
        }
        
        .quality-item {
            flex: 1;
        }
        
        .quality-item label {
            display: block;
            margin-bottom: 4px;
            font-size: 12px;
            color: #666;
        }
        
        .quality-item .form-control {
            font-size: 14px;
            padding: 8px 12px;
        }
        
        .additional-settings {
            margin-top: 8px;
        }
        
        .additional-settings h6 {
            margin: 0 0 8px 0;
            font-size: 14px;
            color: #333;
            font-weight: 500;
        }
        
        .additional-settings textarea {
            resize: vertical;
            min-height: 80px;
        }
        
        /* 스피커 등록 모달 스타일 */
        .speaker-register-modal {
            max-width: 600px;
            width: 90%;
        }
        
        .speaker-register-info {
            background: #e3f2fd;
            border: 1px solid #bbdefb;
            border-radius: 6px;
            padding: 12px 16px;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .speaker-register-info i {
            color: #1976d2;
            font-size: 16px;
        }
        
        .speaker-register-info span {
            font-weight: 600;
            color: #1976d2;
        }
        
        .speaker-register-info small {
            color: #666;
            margin-left: auto;
        }
        
        .speaker-info-group {
            display: flex;
            flex-direction: column;
            gap: 16px;
            margin-top: 8px;
        }
        
        .info-item {
            display: flex;
            flex-direction: column;
            gap: 4px;
        }
        
        .info-item label {
            font-size: 12px;
            color: #666;
            font-weight: 500;
        }
        
        .model-upload-area {
            border: 2px dashed #dc3545;
            border-radius: 6px;
            background: #f8d7da;
            padding: 20px;
            text-align: center;
            margin-top: 8px;
            position: relative;
        }
        
        .upload-placeholder {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
            color: #dc3545;
        }
        
        .upload-placeholder i {
            font-size: 24px;
        }
        
        .upload-placeholder p {
            margin: 0;
            font-size: 14px;
            font-weight: 500;
        }
        
        .model-upload-area button {
            position: absolute;
            top: 50%;
            right: 16px;
            transform: translateY(-50%);
        }
        
        .form-control[readonly] {
            background-color: #f8f9fa;
            color: #6c757d;
        }
        
        .upload-success {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
            color: #28a745;
        }
        
        .upload-success i {
            font-size: 24px;
        }
        
        .upload-success p {
            margin: 0;
            font-size: 14px;
            font-weight: 500;
        }
        
        /* 채널 등록 모달 스타일 */
        .channel-register-modal {
            max-width: 600px;
            width: 90%;
        }
        
        .channel-register-info {
            background: #e3f2fd;
            border: 1px solid #bbdefb;
            border-radius: 6px;
            padding: 12px 16px;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .channel-register-info i {
            color: #1976d2;
            font-size: 16px;
        }
        
        .channel-register-info span {
            font-weight: 600;
            color: #1976d2;
        }
        
        .channel-register-info small {
            color: #666;
            margin-left: auto;
        }
        
        .channel-settings-group {
            display: flex;
            flex-direction: column;
            gap: 16px;
            margin-top: 8px;
        }
        
        .setting-item {
            display: flex;
            flex-direction: column;
            gap: 4px;
        }
        
        .setting-item label {
            font-size: 12px;
            color: #666;
            font-weight: 500;
        }
        
        /* 서버 등록 모달 스타일 */
        .server-register-modal {
            max-width: 600px;
            width: 90%;
        }
        
        .server-register-info {
            background: #e3f2fd;
            border: 1px solid #bbdefb;
            border-radius: 6px;
            padding: 12px 16px;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .server-register-info i {
            color: #1976d2;
            font-size: 16px;
        }
        
        .server-register-info span {
            font-weight: 600;
            color: #1976d2;
        }
        
        .server-register-info small {
            color: #666;
            margin-left: auto;
        }
        
        .connection-settings-group {
            display: flex;
            gap: 16px;
            margin-top: 8px;
        }
        
        .connection-item {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 4px;
        }
        
        .connection-item label {
            font-size: 12px;
            color: #666;
            font-weight: 500;
        }

        /* Loading */
        .loading {
            display: none;
            text-align: center;
            padding: var(--space-3xl);
            color: var(--text-secondary);
        }

        .loading.show {
            display: block;
        }

        .spinner {
            border: 3px solid var(--gray-200);
            border-top: 3px solid var(--primary-blue);
            border-radius: 50%;
            width: 30px;
            height: 30px;
            animation: spin 1s linear infinite;
            margin: 0 auto var(--space-lg);
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Responsive */
        @media (max-width: 768px) {
            .sidebar {
                transform: translateX(-100%);
                position: fixed;
                height: 100vh;
            }

            .sidebar.open {
                transform: translateX(0);
            }

            .main-content {
                width: 100%;
            }

            .header {
                padding: var(--space-md) var(--space-lg);
            }

            .content-area {
                padding: var(--space-md);
            }

            .workflow-section {
                padding: var(--space-lg);
            }

            .content-card {
                padding: var(--space-lg);
            }

            .stats-grid {
                grid-template-columns: 1fr;
            }

            .search-section {
                flex-direction: column;
                align-items: stretch;
            }

            .search-input {
                min-width: auto;
            }

            .data-table {
                font-size: 12px;
            }

            .data-table th,
            .data-table td {
                padding: var(--space-md);
            }
        }
    </style>
    <!-- D3.js 라이브러리 추가 -->
    <script src="d3.min.js"></script>
</head>
<body>
    <div class="app-container">
        <!-- Sidebar -->
        <div class="sidebar collapsed" id="sidebar">
            <div class="sidebar-header">
                <div class="logo">
                    <div class="logo-icon">KT</div>
                    <div class="logo-text">AMP</div>
                </div>
                <button class="sidebar-toggle" onclick="toggleSidebar()">
                    <i class="fas fa-angle-right"></i>
                </button>
            </div>
            
            <nav class="sidebar-nav">
                <div class="nav-section">
                    <div class="nav-section-title">시스템 관리</div>
                    <a href="#" class="nav-item active">
                        <div class="nav-icon"><i class="fas fa-database"></i></div>
                        <span class="nav-item-text">기초데이터 관리</span>
                    </a>
                    <a href="#" class="nav-item">
                        <div class="nav-icon"><i class="fas fa-users"></i></div>
                        <span class="nav-item-text">사용자 관리</span>
                    </a>
                    <a href="#" class="nav-item">
                        <div class="nav-icon"><i class="fas fa-cog"></i></div>
                        <span class="nav-item-text">시스템 설정</span>
                    </a>
                </div>
                
                <div class="nav-section">
                    <div class="nav-section-title">모니터링</div>
                    <a href="#" class="nav-item">
                        <div class="nav-icon"><i class="fas fa-chart-line"></i></div>
                        <span class="nav-item-text">대시보드</span>
                    </a>
                    <a href="#" class="nav-item">
                        <div class="nav-icon"><i class="fas fa-server"></i></div>
                        <span class="nav-item-text">서버 모니터링</span>
                    </a>
                </div>
            </nav>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Header -->
            <div class="header">
                <div class="header-left">
                    <div class="breadcrumb">
                        <span>시스템 관리</span>
                        <span class="breadcrumb-separator">/</span>
                        <span>기초데이터 관리</span>
                    </div>
                </div>
                <div class="header-right">
                    <div class="header-actions">
                        <button class="action-btn">
                            <i class="fas fa-bell"></i>
                        </button>
                        <button class="action-btn">
                            <i class="fas fa-search"></i>
                        </button>
                    </div>
                    <div class="user-avatar">관리자</div>
                </div>
            </div>

            <!-- Content Area -->
            <div class="content-area">
                <!-- Page Header -->
                <div class="workflow-section">
                    <div class="workflow-header">
                        <div class="workflow-title-container">
                            <div class="workflow-title">TTS 기초데이터 관리</div>
                            <div class="workflow-subtitle">서비스, 스피커, 채널, 서버 정보와 연결을 통합 관리합니다</div>
                        </div>
                        <div class="workflow-actions">
                            <button class="btn btn-primary" onclick="openConnectModal()">
                                <i class="fas fa-link"></i>
                                연결하기
                            </button>
                        </div>
                    </div>
                    
                    <!-- Tab Navigation -->
                    <div class="tab-navigation">
                        <div class="tab-line">
                            <div class="tab-fill" id="tabFill" style="width: 0%;"></div>
                </div>

                        <!-- 탭 간 연결 라인들 -->
                        <div class="tab-connection-line services-to-speakers" id="line-services-speakers"></div>
                        <div class="tab-connection-line services-to-channels" id="line-services-channels"></div>
                        <div class="tab-connection-line services-to-servers" id="line-services-servers"></div>
                        <div class="tab-connection-line speakers-to-services" id="line-speakers-services"></div>
                        <div class="tab-connection-line speakers-to-channels" id="line-speakers-channels"></div>
                        <div class="tab-connection-line speakers-to-servers" id="line-speakers-servers"></div>
                        <div class="tab-connection-line channels-to-services" id="line-channels-services"></div>
                        <div class="tab-connection-line channels-to-speakers" id="line-channels-speakers"></div>
                        <div class="tab-connection-line channels-to-servers" id="line-channels-servers"></div>
                        <div class="tab-connection-line servers-to-services" id="line-servers-services"></div>
                        <div class="tab-connection-line servers-to-speakers" id="line-servers-speakers"></div>
                        <div class="tab-connection-line servers-to-channels" id="line-servers-channels"></div>

                        <div class="tab-step" onclick="switchTab('services')">
                            <div class="tab-circle services active" id="tab-services">
                                <i class="fas fa-cog"></i>
                            </div>
                            <div class="tab-info">
                                <div class="tab-title">서비스 관리</div>
                                <div class="tab-status active" id="services-status">활성</div>
                            </div>
                        </div>
                        
                        <div class="tab-step" onclick="switchTab('speakers')">
                            <div class="tab-circle speakers pending" id="tab-speakers">
                                <i class="fas fa-volume-up"></i>
                            </div>
                            <div class="tab-info">
                                <div class="tab-title">스피커 관리</div>
                                <div class="tab-status pending" id="speakers-status">대기중</div>
                            </div>
                        </div>
                        
                        <div class="tab-step" onclick="switchTab('channels')">
                            <div class="tab-circle channels pending" id="tab-channels">
                                <i class="fas fa-broadcast-tower"></i>
                            </div>
                            <div class="tab-info">
                                <div class="tab-title">채널 관리</div>
                                <div class="tab-status pending" id="channels-status">대기중</div>
                            </div>
                        </div>
                        
                        <div class="tab-step" onclick="switchTab('servers')">
                            <div class="tab-circle servers pending" id="tab-servers">
                                <i class="fas fa-server"></i>
                            </div>
                            <div class="tab-info">
                                <div class="tab-title">서버 관리</div>
                                <div class="tab-status pending" id="servers-status">대기중</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Relationship Info Row (숨김 처리) -->
                <div class="stats-row" id="relationshipInfo" style="display: none;">
                    <span class="stats-label" id="relationshipLabel">선택된 항목:</span>
                    <div class="stats-items" id="relationshipItems">
                        <!-- 동적으로 생성됩니다 -->
                    </div>
                </div>

                <!-- Main Content Card -->
                <div class="content-card">
                    <div class="content-header">
                        <div class="content-title-container">
                            <div class="content-title">데이터 목록</div>
                            <div class="content-subtitle">등록된 서비스 목록을 확인하고 등록 할 수 있습니다.</div>
                        </div>
                    </div>

                    <!-- Tab Actions -->
                    <div class="tab-actions">
                        <button class="btn btn-success" id="detailRegisterBtn" onclick="openDetailModal()">
                            <i class="fas fa-plus-circle"></i>
                            <span id="detailRegisterText">서비스 등록</span>
                        </button>
                        <button class="btn btn-primary" id="deployBtn" onclick="openDeployModal()">
                            <i class="fas fa-rocket"></i>
                            <span id="deployBtnText">서비스 배포</span>
                        </button>
                    </div>

                    <!-- Search Section -->
                    <div class="search-section">
                        <input type="text" class="search-input" placeholder="검색어를 입력하세요..." id="globalSearch">
                        <button class="btn btn-primary" onclick="performSearch()">
                            <i class="fas fa-search"></i>
                            검색
                        </button>
                        <button class="btn btn-secondary" onclick="resetSearch()">
                            <i class="fas fa-refresh"></i>
                            초기화
                        </button>
                    </div>

                    <!-- Loading -->
                    <div class="loading" id="loading">
                        <div class="spinner"></div>
                        데이터를 불러오는 중...
                    </div>

                    <!-- Data Table -->
                    <div class="table-container" id="tableContainer">
                        <table class="data-table" id="dataTable">
                            <thead id="tableHead">
                                <!-- 동적으로 생성 -->
                            </thead>
                            <tbody id="tableBody">
                                <!-- 동적으로 생성 -->
                            </tbody>
                        </table>
                        
                        <!-- Table Actions -->
                        <div class="table-actions">
                            <button class="btn btn-danger" onclick="deleteSelected()">
                                <i class="fas fa-trash"></i>
                                선택 삭제
                            </button>
                        </div>
                    </div>

                    <!-- Pagination -->
                    <div class="pagination" id="pagination">
                        <!-- 동적으로 생성 -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Quick Deploy Registration Modal -->
    <div id="quickDeployModal" class="modal">
        <div class="modal-content" style="max-width: 800px;">
            <div class="modal-header">
                <h3 class="modal-title">빠른 배포등록</h3>
                <button class="close" onclick="closeQuickDeployModal()">&times;</button>
            </div>
            <div class="modal-body">
                <!-- Progress Steps -->
                <div class="progress-steps">
                    <div class="step active" id="quickStep1">
                        <div class="step-circle">1</div>
                        <div class="step-label">서비스 정보</div>
                    </div>
                    <div class="step" id="quickStep2">
                        <div class="step-circle">2</div>
                        <div class="step-label">서버 설정</div>
                    </div>
                    <div class="step" id="quickStep3">
                        <div class="step-circle">3</div>
                        <div class="step-label">배포 설정</div>
                    </div>
                    <div class="step" id="quickStep4">
                        <div class="step-circle">4</div>
                        <div class="step-label">완료</div>
                    </div>
                </div>

                <!-- Step 1: Service Information -->
                <div id="quickWizardStep1" class="wizard-step">
                    <div class="form-section">
                        <h4><i class="fas fa-info-circle"></i> 기본 정보</h4>
                        <div class="form-grid">
                            <div class="form-group">
                                <label class="form-label">서비스명 <span class="required">*</span></label>
                                <input type="text" class="form-control" id="quickServiceName" placeholder="예: 고객상담 TTS">
                            </div>
                            <div class="form-group">
                                <label class="form-label">언어 설정 <span class="required">*</span></label>
                                <select class="form-select" id="quickServiceLanguage">
                                    <option value="">선택하세요</option>
                                    <option value="ko">한국어</option>
                                    <option value="en">영어</option>
                                    <option value="ja">일본어</option>
                                    <option value="zh">중국어</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="form-label">서비스 설명</label>
                            <textarea class="form-control form-textarea" id="quickServiceDescription" placeholder="서비스에 대한 간단한 설명을 입력하세요"></textarea>
                        </div>
                    </div>

                    <div class="form-section">
                        <h4><i class="fas fa-sliders-h"></i> TCS 서버 설정</h4>
                        <div class="form-group">
                            <label class="checkbox-label">
                                <input type="checkbox" id="quickEnablePhrase" checked>
                                상용구 사용
                            </label>
                        </div>
                        <div class="form-group">
                            <label class="checkbox-label">
                                <input type="checkbox" id="quickEnableCache" checked>
                                캐시 사용
                            </label>
                        </div>
                    </div>

                    <div class="form-section">
                        <h4><i class="fas fa-music"></i> WAV 품질 설정</h4>
                        <div class="form-grid">
                            <div class="form-group">
                                <label class="form-label">Sample Rate <span class="required">*</span></label>
                                <select class="form-select" id="quickSampleRate">
                                    <option value="">선택하세요</option>
                                    <option value="16000">16 KHz</option>
                                    <option value="22050">22.05 KHz</option>
                                    <option value="24000">24 KHz</option>
                                    <option value="44100">44.1 KHz</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Bit Per Sample <span class="required">*</span></label>
                                <select class="form-select" id="quickBitPerSample">
                                    <option value="">선택하세요</option>
                                    <option value="8">8 Bit</option>
                                    <option value="16">16 Bit</option>
                                    <option value="24">24 Bit</option>
                                    <option value="32">32 Bit</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Channel <span class="required">*</span></label>
                                <select class="form-select" id="quickAudioChannel">
                                    <option value="">선택하세요</option>
                                    <option value="mono">Mono</option>
                                    <option value="stereo">Stereo</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Step 2: Server Configuration -->
                <div id="quickWizardStep2" class="wizard-step" style="display: none;">
                    <div class="form-section">
                        <h4><i class="fas fa-server"></i> 전용 서버 생성</h4>
                        <div class="form-grid">
                            <div class="form-group">
                                <label class="form-label">서버명 <span class="required">*</span></label>
                                <input type="text" class="form-control" id="quickServerName" placeholder="자동 생성됨">
                            </div>
                            <div class="form-group">
                                <label class="form-label">서버 유형 <span class="required">*</span></label>
                                <div class="radio-group">
                                    <label class="radio-label">
                                        <input type="radio" name="quickServerType" value="TCS" checked>
                                        TCS (TTS 전용)
                                    </label>
                                </div>
                            </div>
                        </div>
                        <div class="form-grid">
                            <div class="form-group">
                                <label class="form-label">서버 ID <span class="required">*</span></label>
                                <input type="text" class="form-control" id="quickServerId" placeholder="자동 생성됨">
                            </div>
                            <div class="form-group">
                                <label class="form-label">엔드포인트 <span class="required">*</span></label>
                                <input type="text" class="form-control" id="quickServerEndpoint" value="localhost" placeholder="localhost">
                            </div>
                        </div>
                        <div class="form-grid">
                            <div class="form-group">
                                <label class="form-label">Port <span class="required">*</span></label>
                                <input type="number" class="form-control" id="quickServerPort" placeholder="자동 할당">
                            </div>
                            <div class="form-group">
                                <label class="form-label">최대 연결 수</label>
                                <input type="number" class="form-control" id="quickMaxConnections" value="100" min="1" max="1000">
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="checkbox-label">
                                <input type="checkbox" id="quickUseHttps">
                                HTTPS 사용 여부
                            </label>
                        </div>
                        <div class="form-group">
                            <label class="checkbox-label">
                                <input type="checkbox" id="quickUseServer" checked>
                                서버 사용 여부
                            </label>
                        </div>
                    </div>
                </div>

                <!-- Step 3: Deployment Configuration -->
                <div id="quickWizardStep3" class="wizard-step" style="display: none;">
                    <div class="form-section">
                        <h4><i class="fas fa-rocket"></i> 배포 설정</h4>
                        <div class="alert alert-info">
                            <i class="fas fa-info-circle"></i>
                            서비스 생성과 동시에 전용 서버가 자동으로 생성되고 배포됩니다.
                        </div>
                    </div>
                </div>

                <!-- Step 4: Summary -->
                <div id="quickWizardStep4" class="wizard-step" style="display: none;">
                    <div class="form-section">
                        <h4><i class="fas fa-check-circle"></i> 생성 완료</h4>
                        <div id="quickCreationSummary">
                            <!-- Summary will be populated dynamically -->
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" id="quickPrevBtn" onclick="quickPreviousStep()" style="display: none;">이전</button>
                <button class="btn btn-secondary" onclick="closeQuickDeployModal()">취소</button>
                <button class="btn btn-primary" id="quickNextBtn" onclick="quickNextStep()">다음</button>
                <button class="btn btn-success" id="quickCreateBtn" onclick="quickCreateService()" style="display: none;">생성 및 배포</button>
            </div>
        </div>
    </div>

    <!-- 서버 등록 모달 -->
    <div id="detailModal" class="modal">
        <div class="modal-content server-register-modal">
            <div class="modal-header">
                <h3 class="modal-title" id="detailModalTitle">서버 등록</h3>
                <button class="close" onclick="closeDetailModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="server-register-info">
                    <i class="fas fa-info-circle"></i>
                    <span>서버 등록</span>
                    <small>모든 항목은 필수입력사항입니다.</small>
                    </div>
                
                <div class="form-group">
                    <label>서버 유형</label>
                    <div class="radio-group">
                        <label class="radio-item">
                            <input type="radio" name="serverType" value="TCS" checked>
                            <span class="radio-custom"></span>
                            TCS
                        </label>
                        <label class="radio-item">
                            <input type="radio" name="serverType" value="DSE">
                            <span class="radio-custom"></span>
                            DSE
                        </label>
                        <label class="radio-item">
                            <input type="radio" name="serverType" value="Gateway">
                            <span class="radio-custom"></span>
                            Gateway
                        </label>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="serverName">서버명</label>
                    <div class="input-group">
                        <input type="text" id="serverName" class="form-control" placeholder="서버명을 입력하세요">
                        <button class="btn btn-outline-secondary" type="button" onclick="checkServerNameDuplicate()">중복확인</button>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="serverId">서버 ID</label>
                    <div class="input-group">
                        <input type="text" id="serverId" class="form-control" placeholder="서버 ID를 입력하세요">
                        <button class="btn btn-outline-secondary" type="button" onclick="checkServerIdDuplicate()">중복확인</button>
                    </div>
                </div>
                
                <div class="form-group">
                    <label>연결 설정</label>
                    <div class="connection-settings-group">
                        <div class="connection-item">
                            <label for="endpoint">엔드포인트</label>
                            <input type="text" id="endpoint" class="form-control" placeholder="https://api.example.com">
                        </div>
                        <div class="connection-item">
                            <label for="port">Port</label>
                            <input type="text" id="port" class="form-control" value="8080">
                        </div>
                        <div class="connection-item">
                            <label for="protocol">Protocol</label>
                            <input type="text" id="protocol" class="form-control" value="HTTP">
                        </div>
                    </div>
                </div>
                
                <div class="form-group">
                    <label>서버 설정</label>
                    <div class="checkbox-group">
                        <label class="checkbox-item">
                            <input type="checkbox" name="useHttps" checked>
                            <span class="checkbox-custom"></span>
                            HTTPS 사용
                        </label>
                        <label class="checkbox-item">
                            <input type="checkbox" name="serverActive" checked>
                            <span class="checkbox-custom"></span>
                            서버 활성화
                        </label>
                        <label class="checkbox-item">
                            <input type="checkbox" name="autoRestart">
                            <span class="checkbox-custom"></span>
                            자동 재시작
                        </label>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeDetailModal()">닫기</button>
                <button class="btn btn-primary" onclick="registerServer()">등록</button>
            </div>
        </div>
    </div>

    <!-- Service Deploy Modal (서비스 배포) -->
    <div id="deployModal" class="modal">
        <div class="modal-content" style="max-width: 600px;">
            <div class="modal-header">
                <h3 class="modal-title">TTS 서비스 배포 (패치)</h3>
                <button class="close" onclick="closeDeployModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="deploy-section">
                    <h4>배포할 TTS 서비스를 선택해 주세요</h4>
                    <div class="deploy-items" id="deployItems">
                        <!-- 동적으로 생성되는 배포 가능한 서비스들 -->
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeDeployModal()">취소</button>
                <button class="btn btn-primary" onclick="startDeployment()">배포 시작</button>
            </div>
                    </div>
                </div>
                
    <!-- Speaker Deploy Modal (스피커 배포) -->
    <div id="speakerDeployModal" class="modal">
        <div class="modal-content" style="max-width: 600px;">
            <div class="modal-header">
                <h3 class="modal-title">스피커 배포</h3>
                <button class="close" onclick="closeSpeakerDeployModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="deploy-section">
                    <h4>배포할 스피커 선택</h4>
                    <div class="deploy-items" id="speakerDeployItems">
                        <!-- 동적으로 생성되는 배포 가능한 스피커들 -->
                        </div>
                        </div>
                        </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeSpeakerDeployModal()">취소</button>
                <button class="btn btn-primary" onclick="startSpeakerDeployment()">배포 시작</button>
                        </div>
                    </div>
                </div>
                
    <!-- Channel Deploy Modal (채널 배포) -->
    <div id="channelDeployModal" class="modal">
        <div class="modal-content" style="max-width: 600px;">
            <div class="modal-header">
                <h3 class="modal-title">채널 배포</h3>
                <button class="close" onclick="closeChannelDeployModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="deploy-section">
                    <h4>배포할 채널 선택</h4>
                    <div class="deploy-items" id="channelDeployItems">
                        <!-- 동적으로 생성되는 배포 가능한 채널들 -->
                    </div>
                    </div>
                    </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeChannelDeployModal()">취소</button>
                <button class="btn btn-primary" onclick="startChannelDeployment()">배포 시작</button>
                </div>
            </div>
            </div>

    <!-- 서비스 연결 관리 모달 -->
    <div id="connectModal" class="modal" style="display: none;">
        <div class="modal-content" style="max-width: 95vw; max-height: 90vh; width: 1200px; height: 85vh;">
            <div class="modal-header">
                <div class="modal-title-container">
                    <h3 class="modal-title">
                        <i class="fas fa-link"></i>
                        서비스 연결 관리
                    </h3>
                    <p class="modal-subtitle">등록된 서비스와 스피커, 채널, 서버 간의 연결 관계를 관리합니다</p>
                </div>
                <button class="close" onclick="closeConnectModal()">&times;</button>
            </div>
            <div class="modal-body" style="padding: 0; height: calc(100% - 120px); overflow: hidden;">
                <iframe id="connectionFrame" src="./amp-service-connection-management.html" 
                        style="width: 100%; height: 100%; border: none; border-radius: 0 0 12px 12px;">
                </iframe>
            </div>
        </div>
    </div>

    <script>
        // 전역 변수
        let currentTab = 'services';
        let currentPage = 1;
        let itemsPerPage = 10;
        let currentData = [];
        let selectedEntity = null; // 현재 선택된 엔티티
        let selectedEntityType = null; // 현재 선택된 엔티티 타입
        
        // 연결상세보기 모달의 엔티티 가시성 상태
        let detailEntityVisibility = {
            services: true,
            speakers: true,
            channels: true,
            servers: true
        };
        
        // 연결 데이터 (실제 구현에서는 서버에서 가져와야 함)
        let connectionData = {
            services: {
                '정제스트3': { speakers: ['민수', '432'], channels: ['감정채널'], servers: ['555'] },
                '정제스트2': { speakers: ['영희'], channels: ['기본채널', '특화채널'], servers: ['정제스트2'] },
                '정제스트': { speakers: ['지영', '현우', '수진', '준호', '미래', '태현'], channels: ['음성채널', '텍스트채널', '멀티채널', '12', '11'], servers: ['2', '정제스트2', '정제스트서버', '11', '111', '정제서버'] },
                '테스트서비스': { speakers: ['철수'], channels: [], servers: ['서버1'] }
            },
            speakers: {
                '민수': { services: ['정제스트3'], channels: [], servers: [] },
                '432': { services: ['정제스트3'], channels: ['감정채널'], servers: [] },
                '영희': { services: ['정제스트2'], channels: ['기본채널'], servers: [] },
                '철수': { services: ['테스트서비스'], channels: [], servers: [] },
                '지영': { services: ['정제스트'], channels: ['음성채널'], servers: [] },
                '현우': { services: ['정제스트'], channels: ['텍스트채널'], servers: [] },
                '수진': { services: ['정제스트'], channels: ['멀티채널'], servers: [] },
                '준호': { services: ['정제스트'], channels: ['12'], servers: [] },
                '미래': { services: ['정제스트'], channels: ['11'], servers: [] },
                '태현': { services: ['정제스트'], channels: [], servers: [] }
            },
            channels: {
                '감정채널': { services: ['정제스트3'], speakers: ['432'], servers: [] },
                '기본채널': { services: ['정제스트2'], speakers: ['영희'], servers: ['정제스트2'] },
                '특화채널': { services: ['정제스트2'], speakers: [], servers: [] },
                '음성채널': { services: ['정제스트'], speakers: ['지영'], servers: [] },
                '텍스트채널': { services: ['정제스트'], speakers: ['현우'], servers: [] },
                '멀티채널': { services: ['정제스트'], speakers: ['수진'], servers: [] },
                '12': { services: ['정제스트'], speakers: ['준호'], servers: [] },
                '11': { services: ['정제스트'], speakers: ['미래'], servers: [] }
            },
            servers: {
                '555': { services: ['정제스트3'], speakers: [], channels: [] },
                '정제스트2': { services: ['정제스트2'], speakers: [], channels: ['기본채널'] },
                '2': { services: ['정제스트'], speakers: [], channels: [] },
                '정제스트서버': { services: ['정제스트'], speakers: [], channels: [] },
                '11': { services: ['정제스트'], speakers: [], channels: [] },
                '111': { services: ['정제스트'], speakers: [], channels: [] },
                '정제서버': { services: ['정제스트'], speakers: [], channels: [] },
                '서버1': { services: ['테스트서비스'], speakers: [], channels: [] }
            }
        };

        // 샘플 데이터
        const sampleData = {
            services: [
                { no: 4, name: '정제스트3', language: '한국어', deployStatus: '배포완료', connectedItems: '스피커:0 채널:0 서버:1', sampleRate: '24 Khz', bitPerSample: '16 Bit', channel: 'mono', phraseUse: 'Y', cacheUse: 'Y', regDate: '2025-08-28 10:30:02', updateDate: '2025-08-28 10:30:02' },
                { no: 3, name: '정제스트2', language: '한국어', deployStatus: '배포대기', connectedItems: '스피커:0 채널:0 서버:0', sampleRate: '24 Khz', bitPerSample: '16 Bit', channel: 'mono', phraseUse: 'Y', cacheUse: 'Y', regDate: '2025-08-28 10:29:47', updateDate: '2025-08-28 10:29:47' },
                { no: 2, name: '정제스트', language: '한국어', deployStatus: '배포완료', connectedItems: '스피커:1 채널:2 서버:6', sampleRate: '24 Khz', bitPerSample: '16 Bit', channel: 'mono', phraseUse: 'Y', cacheUse: 'Y', regDate: '2025-08-28 09:37:07', updateDate: '2025-08-28 09:37:07' },
                { no: 1, name: '테스트서비스', language: '한국어', deployStatus: '배포완료', connectedItems: '스피커:1 채널:0 서버:1', sampleRate: '24 Khz', bitPerSample: '16 Bit', channel: 'mono', phraseUse: 'Y', cacheUse: 'Y', regDate: '2025-08-22 14:14:28', updateDate: '2025-08-22 14:14:28' }
            ],
            speakers: [
                { no: 10, speakerType: '기본', speakerCode: '민수', speakerId: 'SPK-001', service: '정제스트3', language: '한국어', version: '배포완료', systemAdmin: '2025-08-01', useAdmin: '-', regDate: '2025-08-01 10:00:00', updateDate: '2025-08-01 10:00:00' },
                { no: 9, speakerType: '특화', speakerCode: '432', speakerId: 'SPK-002', service: '정제스트3', language: '한국어', version: '배포완료', systemAdmin: '2025-08-02', useAdmin: '-', regDate: '2025-08-02 11:00:00', updateDate: '2025-08-02 11:00:00' },
                { no: 8, speakerType: '감정', speakerCode: '영희', speakerId: 'SPK-003', service: '정제스트2', language: '한국어', version: '배포완료', systemAdmin: '2025-08-03', useAdmin: '-', regDate: '2025-08-03 12:00:00', updateDate: '2025-08-03 12:00:00' },
                { no: 7, speakerType: '기본', speakerCode: '철수', speakerId: 'SPK-004', service: '테스트서비스', language: '한국어', version: '배포완료', systemAdmin: '2025-08-04', useAdmin: '-', regDate: '2025-08-04 13:00:00', updateDate: '2025-08-04 13:00:00' },
                { no: 6, speakerType: '특화', speakerCode: '지영', speakerId: 'SPK-005', service: '정제스트', language: '한국어', version: '배포완료', systemAdmin: '2025-08-05', useAdmin: '-', regDate: '2025-08-05 14:00:00', updateDate: '2025-08-05 14:00:00' },
                { no: 5, speakerType: '감정', speakerCode: '현우', speakerId: 'SPK-006', service: '정제스트', language: '한국어', version: '배포완료', systemAdmin: '2025-08-06', useAdmin: '-', regDate: '2025-08-06 15:00:00', updateDate: '2025-08-06 15:00:00' },
                { no: 4, speakerType: '기본', speakerCode: '수진', speakerId: 'SPK-007', service: '정제스트', language: '한국어', version: '배포완료', systemAdmin: '2025-08-07', useAdmin: '-', regDate: '2025-08-07 16:00:00', updateDate: '2025-08-07 16:00:00' },
                { no: 3, speakerType: '특화', speakerCode: '준호', speakerId: 'SPK-008', service: '정제스트', language: '한국어', version: '배포완료', systemAdmin: '2025-08-08', useAdmin: '-', regDate: '2025-08-08 17:00:00', updateDate: '2025-08-08 17:00:00' },
                { no: 2, speakerType: '감정', speakerCode: '미래', speakerId: 'SPK-009', service: '정제스트', language: '한국어', version: '배포완료', systemAdmin: '2025-08-09', useAdmin: '-', regDate: '2025-08-09 18:00:00', updateDate: '2025-08-09 18:00:00' },
                { no: 1, speakerType: '기본', speakerCode: '태현', speakerId: 'SPK-010', service: '정제스트', language: '한국어', version: '배포완료', systemAdmin: '2025-08-10', useAdmin: '-', regDate: '2025-08-10 19:00:00', updateDate: '2025-08-10 19:00:00' }
            ],
            channels: [
                { no: 8, channelName: '감정채널', channelId: 'CH-001', service: '정제스트3', language: '한국어', statsExposure: 'Y', regDate: '2025-08-01 10:00:00', updateDate: '2025-08-01 10:00:00' },
                { no: 7, channelName: '기본채널', channelId: 'CH-002', service: '정제스트2', language: '한국어', statsExposure: 'Y', regDate: '2025-08-02 11:00:00', updateDate: '2025-08-02 11:00:00' },
                { no: 6, channelName: '특화채널', channelId: 'CH-003', service: '정제스트2', language: '한국어', statsExposure: 'Y', regDate: '2025-08-03 12:00:00', updateDate: '2025-08-03 12:00:00' },
                { no: 5, channelName: '음성채널', channelId: 'CH-004', service: '정제스트', language: '한국어', statsExposure: 'Y', regDate: '2025-08-04 13:00:00', updateDate: '2025-08-04 13:00:00' },
                { no: 4, channelName: '텍스트채널', channelId: 'CH-005', service: '정제스트', language: '한국어', statsExposure: 'Y', regDate: '2025-08-05 14:00:00', updateDate: '2025-08-05 14:00:00' },
                { no: 3, channelName: '멀티채널', channelId: 'CH-006', service: '정제스트', language: '한국어', statsExposure: 'Y', regDate: '2025-08-06 15:00:00', updateDate: '2025-08-06 15:00:00' },
                { no: 2, channelName: '12', channelId: '123', service: '정제스트', language: '한국어', statsExposure: 'Y', regDate: '2025-09-01 09:55:58', updateDate: '2025-09-01 09:55:58' },
                { no: 1, channelName: '11', channelId: '11', service: '정제스트', language: '한국어', statsExposure: 'Y', regDate: '2025-08-28 09:42:06', updateDate: '2025-08-28 09:42:06' }
            ],
            servers: [
                { no: 8, serverName: '2', serverId: '222', service: '정제스트', language: '한국어', serverType: 'TCS', endpoint: '3443', serverPort: '3002', useStatus: 'Y', regDate: '2025-09-01 09:56:33', updateDate: '2025-09-01 09:56:33' },
                { no: 7, serverName: '정제스트2', serverId: '4324', service: '정제스트', language: '한국어', serverType: 'TCS', endpoint: '32', serverPort: '322', useStatus: 'Y', regDate: '2025-08-31 17:31:16', updateDate: '2025-08-31 17:31:16' },
                { no: 6, serverName: '정제스트서버', serverId: 'JUN', service: '정제스트', language: '한국어', serverType: 'TCS', endpoint: '3443', serverPort: '2001', useStatus: 'Y', regDate: '2025-08-31 17:30:08', updateDate: '2025-08-31 17:30:08' },
                { no: 5, serverName: '11', serverId: '000', service: '정제스트', language: '한국어', serverType: 'TCS', endpoint: 'gk', serverPort: '666', useStatus: 'Y', regDate: '2025-08-28 11:12:26', updateDate: '2025-08-28 11:27:08' },
                { no: 4, serverName: '111', serverId: '4334', service: '정제스트', language: '한국어', serverType: 'TCS', endpoint: '333', serverPort: '21', useStatus: 'Y', regDate: '2025-08-28 10:33:09', updateDate: '2025-08-28 10:33:09' },
                { no: 3, serverName: '555', serverId: '432', service: '정제스트3', language: '한국어', serverType: 'TCS', endpoint: '3443', serverPort: '323', useStatus: 'Y', regDate: '2025-08-28 10:32:09', updateDate: '2025-08-28 11:14:28' },
                { no: 2, serverName: '정제서버', serverId: 'jjj', service: '정제스트', language: '한국어', serverType: 'TCS', endpoint: 'gk', serverPort: '3001', useStatus: 'Y', regDate: '2025-08-28 09:39:33', updateDate: '2025-08-28 09:39:33' },
                { no: 1, serverName: '서버1', serverId: 'tcs01', service: '테스트서비스', language: '한국어', serverType: 'TCS', endpoint: 'localhost', serverPort: '16791', useStatus: 'Y', regDate: '2025-08-22 14:14:54', updateDate: '2025-08-22 14:54:15' }
            ]
        };

        // 테이블 컬럼 정의
        const tableColumns = {
            services: [
                { key: 'checkbox', label: '', type: 'checkbox' },
                { key: 'no', label: 'No.' },
                { key: 'name', label: '서비스명' },
                { key: 'language', label: '언어' },
                { key: 'deployStatus', label: '배포 상태' },
                { key: 'connectedItems', label: '연결 항목' },
                { key: 'sampleRate', label: 'SampleRate' },
                { key: 'bitPerSample', label: 'BitPerSample' },
                { key: 'channel', label: 'Channel' },
                { key: 'phraseUse', label: '상용구 사용' },
                { key: 'cacheUse', label: '캐시 사용' },
                { key: 'regDate', label: '등록일시' },
                { key: 'updateDate', label: '수정일시' },
                { key: 'detail', label: '연결보기', type: 'action' }
            ],
            speakers: [
                { key: 'checkbox', label: '', type: 'checkbox' },
                { key: 'no', label: 'No.' },
                { key: 'speakerType', label: '스피커 타입' },
                { key: 'speakerCode', label: '스피커 코드' },
                { key: 'speakerId', label: '스피커 관리 ID' },
                { key: 'service', label: '사용 서비스' },
                { key: 'language', label: '언어' },
                { key: 'version', label: '버전상태' },
                { key: 'systemAdmin', label: '스피커 사용 시작일자' },
                { key: 'useAdmin', label: '스피커 사용 종료일자' },
                { key: 'regDate', label: '등록일시' },
                { key: 'updateDate', label: '수정일시' },
                { key: 'detail', label: '연결보기', type: 'action' }
            ],
            channels: [
                { key: 'checkbox', label: '', type: 'checkbox' },
                { key: 'no', label: 'No.' },
                { key: 'channelName', label: '채널명' },
                { key: 'channelId', label: '채널 관리 ID' },
                { key: 'service', label: '서비스' },
                { key: 'language', label: '언어' },
                { key: 'statsExposure', label: '요청통계 노출 여부' },
                { key: 'regDate', label: '등록일시' },
                { key: 'updateDate', label: '수정일시' },
                { key: 'detail', label: '연결보기', type: 'action' }
            ],
            servers: [
                { key: 'checkbox', label: '', type: 'checkbox' },
                { key: 'no', label: 'No.' },
                { key: 'serverName', label: '서버명' },
                { key: 'serverId', label: '서버 ID' },
                { key: 'service', label: '서비스' },
                { key: 'language', label: '언어' },
                { key: 'serverType', label: '서버 타입' },
                { key: 'endpoint', label: '엔드포인트' },
                { key: 'serverPort', label: '서버 Port' },
                { key: 'useStatus', label: '사용 여부' },
                { key: 'regDate', label: '등록일시' },
                { key: 'updateDate', label: '수정일시' },
                { key: 'detail', label: '연결보기', type: 'action' }
            ]
        };

        // 폼 필드 정의
        const formFields = {
            service: [
                { name: 'name', label: '서비스명', type: 'text', required: true },
                { name: 'language', label: '언어 설정', type: 'radio', required: true, options: [
                    { value: 'ko', label: '한국어' },
                    { value: 'en', label: '영어' },
                    { value: 'zh', label: '중국어' },
                    { value: 'ja', label: '일본어' }
                ]},
                { name: 'tcsUsePhrase', label: '상용구 사용', type: 'checkbox' },
                { name: 'tcsUseCache', label: '캐시 사용', type: 'checkbox' },
                { name: 'sampleRate', label: 'Sample Rate', type: 'select', required: true, options: [
                    { value: '16000', label: '16 Khz' },
                    { value: '22050', label: '22 Khz' },
                    { value: '24000', label: '24 Khz' },
                    { value: '44100', label: '44 Khz' }
                ]},
                { name: 'bitPerSample', label: 'Bit Per Sample', type: 'select', required: true, options: [
                    { value: '8', label: '8 bit' },
                    { value: '16', label: '16 bit' },
                    { value: '24', label: '24 bit' }
                ]},
                { name: 'channel', label: 'Channel', type: 'select', required: true, options: [
                    { value: 'mono', label: 'Mono' },
                    { value: 'stereo', label: 'Stereo' }
                ]}
            ],
            speaker: [
                { name: 'speakerType', label: '스피커 종류', type: 'radio', required: true, options: [
                    { value: 'basic', label: '기본 스피커' },
                    { value: 'special', label: '특화 스피커' }
                ]},
                { name: 'speakerCode', label: '스피커 코드', type: 'text', required: true },
                { name: 'speakerId', label: '스피커 관리 ID', type: 'text', required: true },
                { name: 'emotion', label: '스피커 감정', type: 'text', required: true, defaultValue: '기본' },
                { name: 'service', label: '서비스', type: 'select', required: true, options: [
                    { value: 'tts', label: 'TTS (음성 합성 전용)' }
                ]},
                { name: 'modelVersion', label: '모델 버전명', type: 'text', required: true },
                { name: 'modelFile', label: '모델 파일(ZIP)', type: 'file', required: true }
            ],
            channel: [
                { name: 'serviceType', label: '서비스 타입', type: 'radio', required: true, options: [
                    { value: 'tts', label: 'TTS 채널' },
                    { value: 'stt', label: 'STT 채널' }
                ]},
                { name: 'name', label: '채널명', type: 'text', required: true },
                { name: 'channelId', label: '채널 관리 ID', type: 'text', required: true },
                { name: 'showStats', label: '요청통계 노출 여부', type: 'checkbox' }
            ],
            server: [
                { name: 'serviceType', label: '서비스 타입', type: 'radio', required: true, options: [
                    { value: 'tts', label: 'TTS 서버' },
                    { value: 'stt', label: 'STT 서버' }
                ]},
                { name: 'serverType', label: '서버 유형', type: 'radio', required: true, options: [
                    { value: 'tcs', label: 'TCS (TTS 전용)' },
                    { value: 'dse', label: 'DSE (STT 전용)' }
                ]},
                { name: 'name', label: '서버명', type: 'text', required: true },
                { name: 'serverId', label: '서버 ID', type: 'text', required: true },
                { name: 'endpoint', label: '엔드포인트', type: 'text', required: true },
                { name: 'port', label: 'Port', type: 'number', required: true },
                { name: 'useHttps', label: 'HTTPS 사용 여부', type: 'checkbox' },
                { name: 'useServer', label: '서버 사용 여부', type: 'checkbox' }
            ]
        };

        // 연결 관계 표시 함수
        // 연결 관계 표시 함수 (각 탭별로 다른 정보 표시)
        function showRelationships(tabType, itemName, item) {
            // 선택된 서비스명 찾기
            let selectedServiceName = '';
            if (tabType === 'services') {
                selectedServiceName = item.name;
            } else {
                selectedServiceName = item.service;
            }
            
            // 모든 탭의 status 업데이트
            updateAllTabStatus(selectedServiceName);
        }
        
        // 모든 탭의 상태 업데이트
        function updateAllTabStatus(serviceName) {
            // 서비스 탭: 선택된 서비스명 표시
            const servicesStatus = document.getElementById('services-status');
            if (servicesStatus) {
                servicesStatus.textContent = serviceName || '서비스 없음';
            }
            
            // 스피커 탭: 해당 서비스에 연결된 스피커 코드들 표시
            const speakersStatus = document.getElementById('speakers-status');
            if (speakersStatus) {
                const connectedSpeakers = sampleData.speakers.filter(s => s.service === serviceName);
                if (connectedSpeakers.length > 0) {
                    const speakerCodes = connectedSpeakers.map(s => s.speakerCode).join(', ');
                    speakersStatus.textContent = speakerCodes;
                } else {
                    speakersStatus.textContent = '연결된 스피커 없음';
                }
            }
            
            // 채널 탭: 해당 서비스에 연결된 채널명들 표시
            const channelsStatus = document.getElementById('channels-status');
            if (channelsStatus) {
                const connectedChannels = sampleData.channels.filter(c => c.service === serviceName);
                if (connectedChannels.length > 0) {
                    const channelNames = connectedChannels.map(c => c.channelName).join(', ');
                    channelsStatus.textContent = channelNames;
                } else {
                    channelsStatus.textContent = '연결된 채널 없음';
                }
            }
            
            // 서버 탭: 해당 서비스에 연결된 서버명들 표시
            const serversStatus = document.getElementById('servers-status');
            if (serversStatus) {
                const connectedServers = sampleData.servers.filter(s => s.service === serviceName);
                if (connectedServers.length > 0) {
                    const serverNames = connectedServers.map(s => s.serverName).join(', ');
                    serversStatus.textContent = serverNames;
                } else {
                    serversStatus.textContent = '연결된 서버 없음';
                }
            }
        }
        
        // 연결된 항목 이름 포맷팅 함수
        function formatRelatedItems(items, nameExtractor, maxDisplay = 3) {
            if (items.length <= maxDisplay) {
                return items.map(nameExtractor).join(', ');
            } else {
                const displayItems = items.slice(0, maxDisplay).map(nameExtractor);
                const remainingCount = items.length - maxDisplay;
                return `${displayItems.join(', ')} 외 ${remainingCount}개`;
            }
        }
        
        // 연결 관계 찾기 함수
        function findRelationships(tabType, item) {
            const relationships = {
                speakers: [],
                channels: [], 
                servers: [],
                service: null
            };
            
            if (tabType === 'services') {
                // 서비스 선택 시: 해당 서비스에 연결된 스피커, 채널, 서버 찾기
                const serviceName = item.name;
                
                relationships.speakers = sampleData.speakers.filter(s => s.service === serviceName);
                relationships.channels = sampleData.channels.filter(c => c.service === serviceName);
                relationships.servers = sampleData.servers.filter(s => s.service === serviceName);
                
            } else if (tabType === 'speakers') {
                // 스피커 선택 시: 소속 서비스와 관련 채널, 서버 찾기
                const serviceName = item.service;
                relationships.service = serviceName;
                
                relationships.channels = sampleData.channels.filter(c => c.service === serviceName);
                relationships.servers = sampleData.servers.filter(s => s.service === serviceName);
                
            } else if (tabType === 'channels') {
                // 채널 선택 시: 소속 서비스와 관련 스피커, 서버 찾기
                const serviceName = item.service;
                relationships.service = serviceName;
                
                relationships.speakers = sampleData.speakers.filter(s => s.service === serviceName);
                relationships.servers = sampleData.servers.filter(s => s.service === serviceName);
                
            } else if (tabType === 'servers') {
                // 서버 선택 시: 소속 서비스와 관련 스피커, 채널 찾기
                const serviceName = item.service;
                relationships.service = serviceName;
                
                relationships.speakers = sampleData.speakers.filter(s => s.service === serviceName);
                relationships.channels = sampleData.channels.filter(c => c.service === serviceName);
            }
            
            return relationships;
        }

        // 초기화
        document.addEventListener('DOMContentLoaded', function() {
            // 서비스 탭을 기본으로 설정하고 명시적으로 호출
            switchTab('services');
        });

        // Sidebar 토글 함수
        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            const toggleBtn = document.querySelector('.sidebar-toggle i');
            
            sidebar.classList.toggle('collapsed');
            
            // 아이콘 변경
            if (sidebar.classList.contains('collapsed')) {
                toggleBtn.className = 'fas fa-angle-right';
            } else {
                toggleBtn.className = 'fas fa-bars';
            }
        }

        // 탭 전환
        function switchTab(tabName) {
            currentTab = tabName;
            currentPage = 1;
            
            // 모든 탭 원형 버튼 비활성화
            document.querySelectorAll('.tab-circle').forEach(circle => {
                circle.classList.remove('active', 'completed');
                circle.classList.add('pending');
            });
            
            // 모든 탭 상태 비활성화
            document.querySelectorAll('.tab-status').forEach(status => {
                status.classList.remove('active', 'completed');
                status.classList.add('pending');
                status.textContent = '대기중';
            });
            
            // 선택된 탭 활성화
            const selectedCircle = document.getElementById(`tab-${tabName}`);
            const selectedStatus = document.getElementById(`${tabName}-status`);
            
            if (selectedCircle) {
                selectedCircle.classList.remove('pending');
                selectedCircle.classList.add('active');
            }
            
            if (selectedStatus) {
                selectedStatus.classList.remove('pending');
                selectedStatus.classList.add('active');
                selectedStatus.textContent = '활성';
            }
            
            // 진행률 업데이트
            updateTabProgress(tabName);
            
            // 상세 등록 버튼 텍스트 업데이트
            updateDetailRegisterButton();
            
            // 탭별 타이틀 업데이트
            updateTabTitle(tabName);
            
            // 탭별 문구 업데이트
            updateTabSubtitle(tabName);
            
            // 탭별 연결 정보 업데이트
            updateTabStatus(tabName);
            
            loadTabData();
            
            // 선택된 엔티티가 있으면 탭 라인 업데이트
            if (selectedEntity && selectedEntityType) {
                updateTabConnectionLines(selectedEntity, selectedEntityType);
            } else {
                hideAllTabConnectionLines();
            }
        }
        
        // 모든 탭 연결 라인 숨기기
        function hideAllTabConnectionLines() {
            document.querySelectorAll('.tab-connection-line').forEach(line => {
                line.classList.remove('active');
            });
        }
        
        // 탭 연결 라인 업데이트
        function updateTabConnectionLines(entityId, entityType) {
            console.log('updateTabConnectionLines 호출됨:', entityId, entityType);
            
            // 모든 라인 숨기기
            hideAllTabConnectionLines();
            
            // 선택된 엔티티의 연결 정보 가져오기
            const connections = connectionData[entityType] && connectionData[entityType][entityId];
            console.log('연결 정보:', connections);
            
            if (!connections) {
                console.log('연결 정보가 없습니다.');
                return;
            }
            
            // 각 탭과의 연결 상태에 따라 라인 표시
            Object.keys(connections).forEach(targetType => {
                const connectedIds = connections[targetType];
                console.log(`${targetType} 연결된 ID들:`, connectedIds);
                
                if (connectedIds && connectedIds.length > 0) {
                    const lineId = `line-${entityType}-${targetType}`;
                    const line = document.getElementById(lineId);
                    console.log('라인 요소:', lineId, line);
                    
                    if (line) {
                        line.classList.add('active');
                        console.log('라인 활성화:', lineId);
                        // 라인 위치 설정
                        setTabConnectionLinePosition(line, entityType, targetType);
                    }
                }
            });
        }
        
        // 탭 연결 라인 위치 설정
        function setTabConnectionLinePosition(line, fromType, toType) {
            console.log('라인 위치 설정:', fromType, '->', toType);
            
            const tabNavigation = document.querySelector('.tab-navigation');
            const fromTab = document.getElementById(`tab-${fromType}`);
            const toTab = document.getElementById(`tab-${toType}`);
            
            console.log('탭 요소들:', { tabNavigation, fromTab, toTab });
            
            if (!tabNavigation || !fromTab || !toTab) {
                console.error('탭 요소를 찾을 수 없습니다:', { tabNavigation: !!tabNavigation, fromTab: !!fromTab, toTab: !!toTab });
                return;
            }
            
            const navRect = tabNavigation.getBoundingClientRect();
            const fromRect = fromTab.getBoundingClientRect();
            const toRect = toTab.getBoundingClientRect();
            
            const fromCenter = fromRect.left + fromRect.width / 2 - navRect.left;
            const toCenter = toRect.left + toRect.width / 2 - navRect.left;
            
            const left = Math.min(fromCenter, toCenter);
            const width = Math.abs(toCenter - fromCenter);
            
            console.log('라인 위치 계산:', { fromCenter, toCenter, left, width });
            
            line.style.left = `${left}px`;
            line.style.width = `${width}px`;
        }
        
        // 엔티티 선택 함수 (테이블 행 클릭 시 호출)
        function selectEntity(entityId, entityType) {
            console.log('selectEntity 호출됨:', entityId, entityType);
            
            // 실제 엔티티 객체 찾기
            let entity = null;
            if (entityType === 'services') {
                entity = sampleData.services.find(item => item.name === entityId);
            } else if (entityType === 'speakers') {
                entity = sampleData.speakers.find(item => item.speakerCode === entityId);
            } else if (entityType === 'channels') {
                entity = sampleData.channels.find(item => item.channelName === entityId);
            } else if (entityType === 'servers') {
                entity = sampleData.servers.find(item => item.serverName === entityId);
            }
            
            console.log('찾은 엔티티 객체:', entity);
            
            selectedEntity = entity;
            selectedEntityType = entityType;
            
            // 선택된 행 하이라이트
            document.querySelectorAll('.data-table tbody tr').forEach(row => {
                row.classList.remove('selected');
            });
            
            const selectedRow = document.querySelector(`tr[data-id="${entityId}"]`);
            if (selectedRow) {
                selectedRow.classList.add('selected');
            }
            
            // 탭 연결 라인 업데이트
            updateTabConnectionLines(entityId, entityType);
        }
        
        // 탭 진행률 업데이트
        function updateTabProgress(tabName) {
            const tabIndex = ['services', 'speakers', 'channels', 'servers'].indexOf(tabName);
            const progressWidth = (tabIndex / 3) * 100; // 0%, 33.33%, 66.67%, 100%
            
            const tabFill = document.getElementById('tabFill');
            if (tabFill) {
                tabFill.style.width = `${progressWidth}%`;
            }
        }

        // 탭별 타이틀 업데이트
        function updateTabTitle(tabName) {
            const contentTitle = document.querySelector('.content-title');
            
            const tabTitles = {
                services: '서비스 목록',
                speakers: '스피커 목록',
                channels: '채널 목록',
                servers: '서버 목록'
            };
            
            if (contentTitle && tabTitles[tabName]) {
                contentTitle.textContent = tabTitles[tabName];
            }
        }

        // 탭별 문구 업데이트
        function updateTabSubtitle(tabName) {
            const contentSubtitle = document.querySelector('.content-subtitle');
            
            const tabSubtitles = {
                services: '등록된 서비스 목록을 확인하고 등록 할 수 있습니다.',
                speakers: '등록된 스피커 목록을 확인하고 등록할 수 있습니다.',
                channels: '등록된 채널 목록을 확인하고 등록할 수 있습니다.',
                servers: '등록된 서버 목록을 확인하고 등록할 수 있습니다.'
            };
            
            if (contentSubtitle && tabSubtitles[tabName]) {
                contentSubtitle.textContent = tabSubtitles[tabName];
            }
        }

        // 탭별 연결 정보 업데이트
        function updateTabStatus(tabName) {
            // 모든 탭의 상태를 기본값으로 초기화
            const allTabs = ['services', 'speakers', 'channels', 'servers'];
            allTabs.forEach(tab => {
                const statusElement = document.getElementById(`${tab}-status`);
                if (statusElement) {
                    statusElement.textContent = '대기중';
                    statusElement.className = 'tab-status pending';
                }
            });

            // 현재 탭의 상태를 활성으로 설정
            const currentStatusElement = document.getElementById(`${tabName}-status`);
            if (currentStatusElement) {
                currentStatusElement.className = 'tab-status active';
                
                // 연결 정보 계산
                const connectionInfo = getTabConnectionInfo(tabName);
                currentStatusElement.textContent = connectionInfo;
            }
        }

        // 탭별 연결 정보 계산
        function getTabConnectionInfo(tabName) {
            let connectionInfo = '';
            
            if (tabName === 'services') {
                // 서비스 탭: 전체 서비스 수와 연결된 항목들
                const totalServices = sampleData.services.length;
                const totalSpeakers = sampleData.speakers.length;
                const totalChannels = sampleData.channels.length;
                const totalServers = sampleData.servers.length;
                
                connectionInfo = `서비스:${totalServices} 스피커:${totalSpeakers} 채널:${totalChannels} 서버:${totalServers}`;
                
            } else if (tabName === 'speakers') {
                // 스피커 탭: 스피커 수와 연결된 서비스
                const totalSpeakers = sampleData.speakers.length;
                const connectedServices = [...new Set(sampleData.speakers.map(s => s.service))].length;
                
                connectionInfo = `스피커:${totalSpeakers} 서비스:${connectedServices}`;
                
            } else if (tabName === 'channels') {
                // 채널 탭: 채널 수와 연결된 서비스
                const totalChannels = sampleData.channels.length;
                const connectedServices = [...new Set(sampleData.channels.map(c => c.service))].length;
                
                connectionInfo = `채널:${totalChannels} 서비스:${connectedServices}`;
                
            } else if (tabName === 'servers') {
                // 서버 탭: 서버 수와 연결된 서비스
                const totalServers = sampleData.servers.length;
                const connectedServices = [...new Set(sampleData.servers.map(s => s.service))].length;
                
                connectionInfo = `서버:${totalServers} 서비스:${connectedServices}`;
            }
            
            return connectionInfo;
        }

        // 상세 등록 버튼 텍스트 업데이트
        function updateDetailRegisterButton() {
            const detailRegisterText = document.getElementById('detailRegisterText');
            const deployBtn = document.getElementById('deployBtn');
            
            const tabNames = {
                services: '서비스 등록',
                speakers: '스피커 등록',
                channels: '채널 등록',
                servers: '서버 등록'
            };
            
            if (detailRegisterText) {
                detailRegisterText.textContent = tabNames[currentTab] || '항목 등록';
            }
            
            // 배포 버튼은 서비스, 스피커, 채널 탭에서만 표시
            if (deployBtn) {
                if (currentTab === 'servers') {
                    deployBtn.style.display = 'none';
                } else {
                deployBtn.style.display = 'block';
                
                const deployTexts = {
                    services: '서비스 배포 (패치)',
                    speakers: '스피커 배포',
                        channels: '채널 배포'
                };
                
                deployBtn.querySelector('#deployBtnText').textContent = deployTexts[currentTab] || '배포';
                }
            }
        }

        // 탭 데이터 로드
        function loadTabData() {
            showLoading(true);
            
            setTimeout(() => {
                currentData = sampleData[currentTab] || [];
                renderTable();
                renderPagination();
                showLoading(false);
            }, 500);
        }

        // 테이블 렌더링
        function renderTable() {
            const columns = tableColumns[currentTab];
            const tableHead = document.getElementById('tableHead');
            const tableBody = document.getElementById('tableBody');
            
            // 헤더 생성
            tableHead.innerHTML = `
                <tr>
                    ${columns.map(col => {
                        if (col.type === 'checkbox') {
                            return `<th><input type="checkbox" id="selectAll" onchange="toggleSelectAll()"></th>`;
                        } else {
                            return `<th>${col.label}</th>`;
                        }
                    }).join('')}
                </tr>
            `;
            
            // 바디 생성
            const startIndex = (currentPage - 1) * itemsPerPage;
            const endIndex = startIndex + itemsPerPage;
            const pageData = currentData.slice(startIndex, endIndex);
            
            tableBody.innerHTML = pageData.map((item, index) => {
                // 엔티티 ID 생성 (탭별로 다른 필드 사용)
                let entityId;
                if (currentTab === 'services') {
                    entityId = item.name; // 서비스명
                } else if (currentTab === 'speakers') {
                    entityId = item.speakerCode; // 스피커 코드
                } else if (currentTab === 'channels') {
                    entityId = item.channelName; // 채널명
                } else if (currentTab === 'servers') {
                    entityId = item.serverName; // 서버명
                } else {
                    entityId = item.no || item.id; // 기본값
                }
                
                console.log('엔티티 ID 생성:', entityId, '탭:', currentTab, '아이템:', item);
                
                return `
                <tr data-id="${entityId}" onclick="openEditModal('${entityId}', '${currentTab}')" style="cursor: pointer;">
                    ${columns.map(col => {
                        if (col.type === 'checkbox') {
                            return `<td onclick="event.stopPropagation()"><input type="checkbox" class="row-checkbox" data-id="${item.no || item.id}"></td>`;
                        } else if (col.type === 'status') {
                            return `<td><span class="status-badge status-${item[col.key]}">${getStatusLabel(item[col.key])}</span></td>`;
                        } else if (col.type === 'actions') {
                            return `
                                <td onclick="event.stopPropagation()">
                                    <div class="action-buttons">
                                        <button class="btn btn-primary btn-sm" onclick="editItem('${item.id}')">
                                            <i class="fas fa-edit"></i> 수정
                                        </button>
                                        <button class="btn btn-danger btn-sm" onclick="deleteItem('${item.id}')">
                                            <i class="fas fa-trash"></i> 삭제
                                        </button>
                                        ${currentTab === 'services' && item.deployStatus === '배포완료' ? `
                                        <button class="btn btn-success btn-sm" onclick="deployService('${item.name}')">
                                            <i class="fas fa-rocket"></i> 재배포
                                        </button>
                                        ` : ''}
                                        ${currentTab === 'services' && item.deployStatus === '배포대기' && hasAllComponents(item) ? `
                                        <button class="btn btn-warning btn-sm" onclick="deployService('${item.name}')">
                                            <i class="fas fa-play"></i> 배포
                                        </button>
                                        ` : ''}
                                    </div>
                                </td>
                            `;
                        } else if (col.type === 'action') {
                            return `
                                <td onclick="event.stopPropagation()">
                                    <button class="btn btn-outline-primary btn-sm" onclick="showDetailView('${entityId}', '${currentTab}')">
                                        <i class="fas fa-link"></i> 연결보기
                                    </button>
                                </td>
                            `;
                        } else if (col.key === 'deployStatus') {
                            const statusClass = item[col.key] === '배포완료' ? 'success' : item[col.key] === '배포대기' ? 'warning' : 'secondary';
                            return `<td><span class="status-badge status-${statusClass}">${item[col.key] || '-'}</span></td>`;
                        } else if (col.key === 'connectedItems') {
                            return `<td><small style="color: #6b7280;">${item[col.key] || '-'}</small></td>`;
                        } else {
                            return `<td>${item[col.key] || '-'}</td>`;
                        }
                    }).join('')}
                </tr>
            `;
            }).join('');
        }

        // 페이지네이션 렌더링
        function renderPagination() {
            const totalPages = Math.ceil(currentData.length / itemsPerPage);
            const pagination = document.getElementById('pagination');
            
            if (totalPages <= 1) {
                pagination.innerHTML = '';
                return;
            }
            
            let paginationHtml = `
                <button class="page-btn" onclick="changePage(${currentPage - 1})" ${currentPage === 1 ? 'disabled' : ''}>
                    <i class="fas fa-chevron-left"></i>
                </button>
            `;
            
            for (let i = 1; i <= totalPages; i++) {
                paginationHtml += `
                    <button class="page-btn ${i === currentPage ? 'active' : ''}" onclick="changePage(${i})">
                        ${i}
                    </button>
                `;
            }
            
            paginationHtml += `
                <button class="page-btn" onclick="changePage(${currentPage + 1})" ${currentPage === totalPages ? 'disabled' : ''}>
                    <i class="fas fa-chevron-right"></i>
                </button>
            `;
            
            pagination.innerHTML = paginationHtml;
        }

        // 페이지 변경
        function changePage(page) {
            const totalPages = Math.ceil(currentData.length / itemsPerPage);
            if (page < 1 || page > totalPages) return;
            
            currentPage = page;
            renderTable();
            renderPagination();
        }

        // 상태 라벨 변환
        function getStatusLabel(status) {
            const statusLabels = {
                active: '활성',
                inactive: '비활성',
                online: '온라인',
                offline: '오프라인',
                running: '실행중',
                stopped: '중지됨',
                maintenance: '점검중'
            };
            return statusLabels[status] || status;
        }

        // 통계 업데이트 (연결 관계 표시로 대체됨)
        function updateStats() {
            // 연결 관계 표시 기능으로 대체됨
            // 필요시 개별 카운트는 연결 관계에서 표시
        }

        // 로딩 표시
        function showLoading(show) {
            const loading = document.getElementById('loading');
            const tableContainer = document.getElementById('tableContainer');
            
            if (show) {
                loading.classList.add('show');
                tableContainer.style.display = 'none';
            } else {
                loading.classList.remove('show');
                tableContainer.style.display = 'block';
            }
        }

        // 빠른 배포등록 모달 관련 변수
        let quickCurrentStep = 1;

        // 빠른 배포등록 모달 열기
        function openQuickDeployModal() {
            document.getElementById('quickDeployModal').style.display = 'block';
            quickCurrentStep = 1;
            updateQuickWizardStep();
            generateQuickAutoValues();
        }

        // 빠른 배포등록 모달 닫기
        function closeQuickDeployModal() {
            document.getElementById('quickDeployModal').style.display = 'none';
            resetQuickWizardForm();
        }

        function generateQuickAutoValues() {
            const serviceName = document.getElementById('quickServiceName').value || '새서비스';
            const timestamp = Date.now().toString().slice(-4);
            
            document.getElementById('quickServerName').placeholder = `TCS-${serviceName}-${timestamp}`;
            document.getElementById('quickServerId').placeholder = `tcs_${serviceName.toLowerCase()}_${timestamp}`;
            document.getElementById('quickServerPort').placeholder = `${16790 + sampleData.services.length + 1}`;
        }

        function quickNextStep() {
            if (validateQuickCurrentStep()) {
                if (quickCurrentStep < 4) {
                    quickCurrentStep++;
                    updateQuickWizardStep();
                    
                    if (quickCurrentStep === 2) {
                        generateQuickAutoValues();
                    } else if (quickCurrentStep === 4) {
                        generateQuickSummary();
                    }
                }
            }
        }

        function quickPreviousStep() {
            if (quickCurrentStep > 1) {
                quickCurrentStep--;
                updateQuickWizardStep();
            }
        }

        function updateQuickWizardStep() {
            // Update step indicators
            for (let i = 1; i <= 4; i++) {
                const step = document.getElementById(`quickStep${i}`);
                const wizardStep = document.getElementById(`quickWizardStep${i}`);
                
                if (i < quickCurrentStep) {
                    step.classList.add('completed');
                    step.classList.remove('active');
                } else if (i === quickCurrentStep) {
                    step.classList.add('active');
                    step.classList.remove('completed');
                } else {
                    step.classList.remove('active', 'completed');
                }
                
                wizardStep.style.display = i === quickCurrentStep ? 'block' : 'none';
            }

            // Update buttons
            const prevBtn = document.getElementById('quickPrevBtn');
            const nextBtn = document.getElementById('quickNextBtn');
            const createBtn = document.getElementById('quickCreateBtn');

            prevBtn.style.display = quickCurrentStep > 1 ? 'inline-flex' : 'none';
            nextBtn.style.display = quickCurrentStep < 4 ? 'inline-flex' : 'none';
            createBtn.style.display = quickCurrentStep === 4 ? 'inline-flex' : 'none';
        }

        function validateQuickCurrentStep() {
            switch (quickCurrentStep) {
                case 1:
                    const serviceName = document.getElementById('quickServiceName').value;
                    const serviceLanguage = document.getElementById('quickServiceLanguage').value;
                    const sampleRate = document.getElementById('quickSampleRate').value;
                    const bitPerSample = document.getElementById('quickBitPerSample').value;
                    const audioChannel = document.getElementById('quickAudioChannel').value;

                    if (!serviceName || !serviceLanguage || !sampleRate || !bitPerSample || !audioChannel) {
                        alert('필수 항목을 모두 입력해주세요.');
                        return false;
                    }
                    return true;

                case 2:
                    const serverName = document.getElementById('quickServerName').value;
                    const serverId = document.getElementById('quickServerId').value;
                    const serverEndpoint = document.getElementById('quickServerEndpoint').value;
                    const serverPort = document.getElementById('quickServerPort').value;

                    if (!serverName || !serverId || !serverEndpoint || !serverPort) {
                        alert('서버 설정을 모두 입력해주세요.');
                        return false;
                    }
                    return true;

                case 3:
                    // 배포 설정 단계는 검증 없이 통과
                    return true;

                default:
                    return true;
            }
        }

        function generateQuickSummary() {
            const serviceName = document.getElementById('quickServiceName').value;
            const serviceLanguage = document.getElementById('quickServiceLanguage').value;
            const serverName = document.getElementById('quickServerName').value || document.getElementById('quickServerName').placeholder;
            const serverId = document.getElementById('quickServerId').value || document.getElementById('quickServerId').placeholder;
            const serverPort = document.getElementById('quickServerPort').value || document.getElementById('quickServerPort').placeholder;


            const summaryHtml = `
                <div style="background: white; padding: 20px; border-radius: 12px; border: 1px solid #e5e7eb;">
                    <h5 style="margin-bottom: 16px; color: #1a202c;">생성될 서비스 정보</h5>
                    <div style="display: grid; gap: 12px;">
                        <div style="display: flex; justify-content: space-between;">
                            <span style="color: #4a5568;">서비스명:</span>
                            <strong>${serviceName}</strong>
                        </div>
                        <div style="display: flex; justify-content: space-between;">
                            <span style="color: #4a5568;">언어:</span>
                            <strong>${serviceLanguage}</strong>
                        </div>
                        <div style="display: flex; justify-content: space-between;">
                            <span style="color: #4a5568;">전용 서버:</span>
                            <strong>${serverName}</strong>
                        </div>
                        <div style="display: flex; justify-content: space-between;">
                            <span style="color: #4a5568;">서버 ID:</span>
                            <strong>${serverId}</strong>
                        </div>
                        <div style="display: flex; justify-content: space-between;">
                            <span style="color: #4a5568;">엔드포인트:</span>
                            <strong>localhost:${serverPort}</strong>
                        </div>

                    </div>
                </div>
                <div style="margin-top: 20px; padding: 16px; background: #f0fff4; border-radius: 8px; border-left: 4px solid #48bb78;">
                    <p style="margin: 0; color: #2d3748;">
                        <i class="fas fa-info-circle" style="color: #48bb78; margin-right: 8px;"></i>
                        서비스 생성과 동시에 전용 서버가 자동으로 생성되고 배포됩니다.
                    </p>
                </div>
            `;

            document.getElementById('quickCreationSummary').innerHTML = summaryHtml;
        }

        function quickCreateService() {
            const serviceName = document.getElementById('quickServiceName').value;
            const serviceLanguage = document.getElementById('quickServiceLanguage').value;
            const serverName = document.getElementById('quickServerName').value || document.getElementById('quickServerName').placeholder;
            const serverId = document.getElementById('quickServerId').value || document.getElementById('quickServerId').placeholder;
            const serverPort = document.getElementById('quickServerPort').value || document.getElementById('quickServerPort').placeholder;

            const sampleRate = document.getElementById('quickSampleRate').value;
            const bitPerSample = document.getElementById('quickBitPerSample').value;
            const audioChannel = document.getElementById('quickAudioChannel').value;

            // 서비스 데이터에 추가
            const newService = {
                no: sampleData.services.length + 1,
                name: serviceName,
                language: serviceLanguage,
                sampleRate: sampleRate + ' Hz',
                bitPerSample: bitPerSample + ' Bit',
                channel: audioChannel,
                phraseUse: document.getElementById('quickEnablePhrase').checked ? 'Y' : 'N',
                cacheUse: document.getElementById('quickEnableCache').checked ? 'Y' : 'N',
                regDate: new Date().toISOString().slice(0, 19).replace('T', ' '),
                updateDate: new Date().toISOString().slice(0, 19).replace('T', ' ')
            };

            // 서버 데이터에 추가
            const newServer = {
                no: sampleData.servers.length + 1,
                serverName: serverName,
                serverId: serverId,
                service: serviceName,
                language: serviceLanguage,
                serverType: 'TCS',
                endpoint: 'localhost',
                serverPort: serverPort,
                useStatus: 'Y',
                regDate: new Date().toISOString().slice(0, 19).replace('T', ' '),
                updateDate: new Date().toISOString().slice(0, 19).replace('T', ' ')
            };

            sampleData.services.push(newService);
            sampleData.servers.push(newServer);
            
            // 현재 탭이 서비스면 새로고침
            if (currentTab === 'services') {
                loadTabData();
            }
            
            updateStats();
            closeQuickDeployModal();

            alert(`TTS 서비스가 성공적으로 생성되었습니다!\n\n서비스명: ${serviceName}\n전용 서버: ${serverName}\n상태: ${autoStart ? '배포 완료' : '배포 대기'}`);
        }

        function resetQuickWizardForm() {
            quickCurrentStep = 1;
            document.getElementById('quickServiceName').value = '';
            document.getElementById('quickServiceLanguage').value = '';
            document.getElementById('quickServiceDescription').value = '';
            document.getElementById('quickServerName').value = '';
            document.getElementById('quickServerId').value = '';
            document.getElementById('quickServerPort').value = '';
            document.getElementById('quickDeployEnvironment').value = '';
            document.getElementById('quickDeployType').value = '';
            updateQuickWizardStep();
        }

        // 상세 모달 열기 (스피커 등록)
        function openDetailModal() {
            const detailModal = document.getElementById('detailModal');
            const detailModalTitle = document.getElementById('detailModalTitle');
            
            const tabTitles = {
                services: '서비스 상세',
                speakers: '스피커 상세',
                channels: '채널 상세',
                servers: '서버 상세'
            };
            
            detailModalTitle.textContent = tabTitles[currentTab] || '항목 상세';
            detailModal.style.display = 'block';
            
            // 현재 탭에 따라 폼 초기화
            if (currentTab === 'speakers') {
                resetSpeakerRegisterForm();
            } else if (currentTab === 'services') {
                resetServiceRegisterForm();
            } else if (currentTab === 'channels') {
                resetChannelRegisterForm();
            } else if (currentTab === 'servers') {
                resetServerRegisterForm();
            }
        }

        // 상세 모달 닫기
        function closeDetailModal() {
            document.getElementById('detailModal').style.display = 'none';
        }
        
        // 서비스 등록 폼 초기화
        function resetServiceRegisterForm() {
            document.getElementById('serviceName').value = '';
            document.querySelector('input[name="language"][value="한국어"]').checked = true;
            document.querySelector('input[name="phraseUse"]').checked = true;
            document.querySelector('input[name="cacheUse"]').checked = false;
            document.getElementById('sampleRate').value = '22050';
            document.getElementById('bitPerSample').value = '16';
            document.getElementById('channel').value = 'Mono';
            document.getElementById('serviceDescription').value = '';
        }
        
        // 중복확인 함수
        function checkDuplicate() {
            const serviceName = document.getElementById('serviceName').value.trim();
            
            if (!serviceName) {
                alert('서비스명을 입력해주세요.');
                return;
            }
            
            // 기존 서비스 목록에서 중복 확인
            const existingService = sampleData.services.find(service => 
                service.name.toLowerCase() === serviceName.toLowerCase()
            );
            
            if (existingService) {
                alert('이미 존재하는 서비스명입니다.');
            } else {
                alert('사용 가능한 서비스명입니다.');
            }
        }
        
        // 서비스 등록 함수
        function registerService() {
            const serviceData = getServiceFormData();
            
            if (!validateServiceData(serviceData)) {
                return;
            }
            
            // 새 서비스 추가
            const newService = {
                no: sampleData.services.length + 1,
                name: serviceData.name,
                language: serviceData.language,
                deployStatus: '배포대기',
                connectedItems: '스피커:0 채널:0 서버:0',
                sampleRate: serviceData.sampleRate + ' Khz',
                bitPerSample: serviceData.bitPerSample + ' Bit',
                channel: serviceData.channel.toLowerCase(),
                phraseUse: serviceData.phraseUse ? 'Y' : 'N',
                cacheUse: serviceData.cacheUse ? 'Y' : 'N',
                regDate: new Date().toISOString().slice(0, 19).replace('T', ' '),
                updateDate: new Date().toISOString().slice(0, 19).replace('T', ' ')
            };
            
            sampleData.services.unshift(newService);
            loadTabData();
            closeDetailModal();
            
            alert('서비스가 성공적으로 등록되었습니다.');
        }
        
        // 서비스 등록 및 배포 함수
        function registerAndDeployService() {
            const serviceData = getServiceFormData();
            
            if (!validateServiceData(serviceData)) {
                return;
            }
            
            // 새 서비스 추가
            const newService = {
                no: sampleData.services.length + 1,
                name: serviceData.name,
                language: serviceData.language,
                deployStatus: '배포완료',
                connectedItems: '스피커:0 채널:0 서버:0',
                sampleRate: serviceData.sampleRate + ' Khz',
                bitPerSample: serviceData.bitPerSample + ' Bit',
                channel: serviceData.channel.toLowerCase(),
                phraseUse: serviceData.phraseUse ? 'Y' : 'N',
                cacheUse: serviceData.cacheUse ? 'Y' : 'N',
                regDate: new Date().toISOString().slice(0, 19).replace('T', ' '),
                updateDate: new Date().toISOString().slice(0, 19).replace('T', ' ')
            };
            
            sampleData.services.unshift(newService);
            loadTabData();
            closeDetailModal();
            
            alert('서비스가 성공적으로 등록되고 배포되었습니다.');
        }
        
        // 서비스 폼 데이터 수집
        function getServiceFormData() {
            return {
                name: document.getElementById('serviceName').value.trim(),
                language: document.querySelector('input[name="language"]:checked').value,
                phraseUse: document.querySelector('input[name="phraseUse"]').checked,
                cacheUse: document.querySelector('input[name="cacheUse"]').checked,
                sampleRate: document.getElementById('sampleRate').value,
                bitPerSample: document.getElementById('bitPerSample').value,
                channel: document.getElementById('channel').value,
                description: document.getElementById('serviceDescription').value.trim()
            };
        }
        
        // 서비스 데이터 유효성 검사
        function validateServiceData(data) {
            if (!data.name) {
                alert('서비스명을 입력해주세요.');
                document.getElementById('serviceName').focus();
                return false;
            }
            
            if (!data.sampleRate || isNaN(data.sampleRate)) {
                alert('올바른 Sample Rate를 입력해주세요.');
                document.getElementById('sampleRate').focus();
                return false;
            }
            
            if (!data.bitPerSample || isNaN(data.bitPerSample)) {
                alert('올바른 Bit Per Sample을 입력해주세요.');
                document.getElementById('bitPerSample').focus();
                return false;
            }
            
            if (!data.channel) {
                alert('Channel을 입력해주세요.');
                document.getElementById('channel').focus();
                return false;
            }
            
            return true;
        }
        
        // 스피커 등록 폼 초기화
        function resetSpeakerRegisterForm() {
            document.querySelector('input[name="speakerType"][value="기본"]').checked = true;
            document.getElementById('speakerCode').value = '';
            document.getElementById('speakerId').value = '';
            document.getElementById('speakerStatus').value = '활성';
            document.getElementById('connectedService').value = '';
            document.getElementById('speakerDescription').value = '';
            
            // 모델 업로드 영역 초기화
            const uploadArea = document.getElementById('modelUploadArea');
            uploadArea.innerHTML = `
                <div class="upload-placeholder">
                    <i class="fas fa-upload"></i>
                    <p>모델 파일을 업로드해주세요.</p>
                </div>
                <button class="btn btn-outline-secondary" type="button" onclick="uploadModelFile()">모델 파일(ZIP)</button>
            `;
        }
        
        // 스피커 코드 중복확인
        function checkSpeakerCodeDuplicate() {
            const speakerCode = document.getElementById('speakerCode').value.trim();
            
            if (!speakerCode) {
                alert('스피커 코드를 입력해주세요.');
                return;
            }
            
            const existingSpeaker = sampleData.speakers.find(speaker => 
                speaker.speakerCode.toLowerCase() === speakerCode.toLowerCase()
            );
            
            if (existingSpeaker) {
                alert('이미 존재하는 스피커 코드입니다.');
            } else {
                alert('사용 가능한 스피커 코드입니다.');
            }
        }
        
        // 스피커 관리 ID 중복확인
        function checkSpeakerIdDuplicate() {
            const speakerId = document.getElementById('speakerId').value.trim();
            
            if (!speakerId) {
                alert('스피커 관리 ID를 입력해주세요.');
                return;
            }
            
            const existingSpeaker = sampleData.speakers.find(speaker => 
                speaker.speakerId.toLowerCase() === speakerId.toLowerCase()
            );
            
            if (existingSpeaker) {
                alert('이미 존재하는 스피커 관리 ID입니다.');
            } else {
                alert('사용 가능한 스피커 관리 ID입니다.');
            }
        }
        
        // 스피커 목록 표시
        function showSpeakerList() {
            alert('스피커 목록 기능은 추후 구현 예정입니다.');
        }
        
        // 모델 파일 업로드
        function uploadModelFile() {
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = '.zip';
            input.onchange = function(e) {
                const file = e.target.files[0];
                if (file) {
                    // 업로드 영역 업데이트
                    const uploadArea = document.getElementById('modelUploadArea');
                    uploadArea.innerHTML = `
                        <div class="upload-success">
                            <i class="fas fa-check-circle"></i>
                            <p>${file.name}</p>
                        </div>
                        <button class="btn btn-outline-secondary" type="button" onclick="uploadModelFile()">모델 파일(ZIP)</button>
                    `;
                }
            };
            input.click();
        }
        
        // 스피커 등록 함수
        function registerSpeaker() {
            const speakerData = getSpeakerFormData();
            
            if (!validateSpeakerData(speakerData)) {
                return;
            }
            
            // 새 스피커 추가
            const newSpeaker = {
                no: sampleData.speakers.length + 1,
                speakerType: speakerData.speakerType,
                speakerCode: speakerData.speakerCode,
                speakerId: speakerData.speakerId,
                service: speakerData.connectedService || '-',
                language: '한국어',
                version: '배포대기',
                systemAdmin: new Date().toISOString().slice(0, 10),
                useAdmin: '-',
                regDate: new Date().toISOString().slice(0, 19).replace('T', ' '),
                updateDate: new Date().toISOString().slice(0, 19).replace('T', ' ')
            };
            
            sampleData.speakers.unshift(newSpeaker);
            loadTabData();
            closeDetailModal();
            
            alert('스피커가 성공적으로 등록되었습니다.');
        }
        
        // 스피커 등록 및 배포 함수
        function registerAndDeploySpeaker() {
            const speakerData = getSpeakerFormData();
            
            if (!validateSpeakerData(speakerData)) {
                return;
            }
            
            // 새 스피커 추가
            const newSpeaker = {
                no: sampleData.speakers.length + 1,
                speakerType: speakerData.speakerType,
                speakerCode: speakerData.speakerCode,
                speakerId: speakerData.speakerId,
                service: speakerData.connectedService || '-',
                language: '한국어',
                version: '배포완료',
                systemAdmin: new Date().toISOString().slice(0, 10),
                useAdmin: '-',
                regDate: new Date().toISOString().slice(0, 19).replace('T', ' '),
                updateDate: new Date().toISOString().slice(0, 19).replace('T', ' ')
            };
            
            sampleData.speakers.unshift(newSpeaker);
            loadTabData();
            closeDetailModal();
            
            alert('스피커가 성공적으로 등록되고 배포되었습니다.');
        }
        
        // 스피커 폼 데이터 수집
        function getSpeakerFormData() {
            return {
                speakerType: document.querySelector('input[name="speakerType"]:checked').value,
                speakerCode: document.getElementById('speakerCode').value.trim(),
                speakerId: document.getElementById('speakerId').value.trim(),
                speakerStatus: document.getElementById('speakerStatus').value,
                connectedService: document.getElementById('connectedService').value.trim(),
                description: document.getElementById('speakerDescription').value.trim()
            };
        }
        
        // 스피커 데이터 유효성 검사
        function validateSpeakerData(data) {
            if (!data.speakerCode) {
                alert('스피커 코드를 입력해주세요.');
                document.getElementById('speakerCode').focus();
                return false;
            }
            
            if (!data.speakerId) {
                alert('스피커 관리 ID를 입력해주세요.');
                document.getElementById('speakerId').focus();
                return false;
            }
            
            return true;
        }
        
        // 채널 등록 폼 초기화
        function resetChannelRegisterForm() {
            document.getElementById('channelName').value = '';
            document.getElementById('channelId').value = '';
            document.getElementById('channelType').value = '일반 채널';
            document.getElementById('channelStatus').value = '활성';
            document.querySelector('input[name="requestStats"]').checked = true;
            document.querySelector('input[name="realtimeMonitoring"]').checked = false;
        }
        
        // 채널명 중복확인
        function checkChannelNameDuplicate() {
            const channelName = document.getElementById('channelName').value.trim();
            
            if (!channelName) {
                alert('채널명을 입력해주세요.');
                return;
            }
            
            const existingChannel = sampleData.channels.find(channel => 
                channel.channelName.toLowerCase() === channelName.toLowerCase()
            );
            
            if (existingChannel) {
                alert('이미 존재하는 채널명입니다.');
            } else {
                alert('사용 가능한 채널명입니다.');
            }
        }
        
        // 채널 관리 ID 중복확인
        function checkChannelIdDuplicate() {
            const channelId = document.getElementById('channelId').value.trim();
            
            if (!channelId) {
                alert('채널 관리 ID를 입력해주세요.');
                return;
            }
            
            const existingChannel = sampleData.channels.find(channel => 
                channel.channelId.toLowerCase() === channelId.toLowerCase()
            );
            
            if (existingChannel) {
                alert('이미 존재하는 채널 관리 ID입니다.');
            } else {
                alert('사용 가능한 채널 관리 ID입니다.');
            }
        }
        
        // 채널 등록 함수
        function registerChannel() {
            const channelData = getChannelFormData();
            
            if (!validateChannelData(channelData)) {
                return;
            }
            
            // 새 채널 추가
            const newChannel = {
                no: sampleData.channels.length + 1,
                channelName: channelData.channelName,
                channelId: channelData.channelId,
                channelType: channelData.channelType,
                status: channelData.channelStatus,
                language: '한국어',
                requestStats: channelData.requestStats ? 'Y' : 'N',
                realtimeMonitoring: channelData.realtimeMonitoring ? 'Y' : 'N',
                regDate: new Date().toISOString().slice(0, 19).replace('T', ' '),
                updateDate: new Date().toISOString().slice(0, 19).replace('T', ' ')
            };
            
            sampleData.channels.unshift(newChannel);
            loadTabData();
            closeDetailModal();
            
            alert('채널이 성공적으로 등록되었습니다.');
        }
        
        // 채널 등록 및 배포 함수
        function registerAndDeployChannel() {
            const channelData = getChannelFormData();
            
            if (!validateChannelData(channelData)) {
                return;
            }
            
            // 새 채널 추가
            const newChannel = {
                no: sampleData.channels.length + 1,
                channelName: channelData.channelName,
                channelId: channelData.channelId,
                channelType: channelData.channelType,
                status: channelData.channelStatus,
                language: '한국어',
                requestStats: channelData.requestStats ? 'Y' : 'N',
                realtimeMonitoring: channelData.realtimeMonitoring ? 'Y' : 'N',
                regDate: new Date().toISOString().slice(0, 19).replace('T', ' '),
                updateDate: new Date().toISOString().slice(0, 19).replace('T', ' ')
            };
            
            sampleData.channels.unshift(newChannel);
            loadTabData();
            closeDetailModal();
            
            alert('채널이 성공적으로 등록되고 배포되었습니다.');
        }
        
        // 채널 폼 데이터 수집
        function getChannelFormData() {
            return {
                channelName: document.getElementById('channelName').value.trim(),
                channelId: document.getElementById('channelId').value.trim(),
                channelType: document.getElementById('channelType').value,
                channelStatus: document.getElementById('channelStatus').value,
                requestStats: document.querySelector('input[name="requestStats"]').checked,
                realtimeMonitoring: document.querySelector('input[name="realtimeMonitoring"]').checked
            };
        }
        
        // 채널 데이터 유효성 검사
        function validateChannelData(data) {
            if (!data.channelName) {
                alert('채널명을 입력해주세요.');
                document.getElementById('channelName').focus();
                return false;
            }
            
            if (!data.channelId) {
                alert('채널 관리 ID를 입력해주세요.');
                document.getElementById('channelId').focus();
                return false;
            }
            
            return true;
        }
        
        // 서버 등록 폼 초기화
        function resetServerRegisterForm() {
            document.querySelector('input[name="serverType"][value="TCS"]').checked = true;
            document.getElementById('serverName').value = '';
            document.getElementById('serverId').value = '';
            document.getElementById('endpoint').value = 'https://api.example.com';
            document.getElementById('port').value = '8080';
            document.getElementById('protocol').value = 'HTTP';
            document.querySelector('input[name="useHttps"]').checked = true;
            document.querySelector('input[name="serverActive"]').checked = true;
            document.querySelector('input[name="autoRestart"]').checked = false;
        }
        
        // 서버명 중복확인
        function checkServerNameDuplicate() {
            const serverName = document.getElementById('serverName').value.trim();
            
            if (!serverName) {
                alert('서버명을 입력해주세요.');
                return;
            }
            
            const existingServer = sampleData.servers.find(server => 
                server.serverName.toLowerCase() === serverName.toLowerCase()
            );
            
            if (existingServer) {
                alert('이미 존재하는 서버명입니다.');
            } else {
                alert('사용 가능한 서버명입니다.');
            }
        }
        
        // 서버 ID 중복확인
        function checkServerIdDuplicate() {
            const serverId = document.getElementById('serverId').value.trim();
            
            if (!serverId) {
                alert('서버 ID를 입력해주세요.');
                return;
            }
            
            const existingServer = sampleData.servers.find(server => 
                server.serverId.toLowerCase() === serverId.toLowerCase()
            );
            
            if (existingServer) {
                alert('이미 존재하는 서버 ID입니다.');
            } else {
                alert('사용 가능한 서버 ID입니다.');
            }
        }
        
        // 서버 등록 함수
        function registerServer() {
            const serverData = getServerFormData();
            
            if (!validateServerData(serverData)) {
                return;
            }
            
            // 새 서버 추가
            const newServer = {
                no: sampleData.servers.length + 1,
                serverName: serverData.serverName,
                serverId: serverData.serverId,
                serverType: serverData.serverType,
                endpoint: serverData.endpoint,
                port: serverData.port,
                protocol: serverData.protocol,
                useHttps: serverData.useHttps ? 'Y' : 'N',
                serverActive: serverData.serverActive ? 'Y' : 'N',
                autoRestart: serverData.autoRestart ? 'Y' : 'N',
                status: '활성',
                regDate: new Date().toISOString().slice(0, 19).replace('T', ' '),
                updateDate: new Date().toISOString().slice(0, 19).replace('T', ' ')
            };
            
            sampleData.servers.unshift(newServer);
            loadTabData();
            closeDetailModal();
            
            alert('서버가 성공적으로 등록되었습니다.');
        }
        
        // 서버 폼 데이터 수집
        function getServerFormData() {
            return {
                serverType: document.querySelector('input[name="serverType"]:checked').value,
                serverName: document.getElementById('serverName').value.trim(),
                serverId: document.getElementById('serverId').value.trim(),
                endpoint: document.getElementById('endpoint').value.trim(),
                port: document.getElementById('port').value.trim(),
                protocol: document.getElementById('protocol').value.trim(),
                useHttps: document.querySelector('input[name="useHttps"]').checked,
                serverActive: document.querySelector('input[name="serverActive"]').checked,
                autoRestart: document.querySelector('input[name="autoRestart"]').checked
            };
        }
        
        // 서버 데이터 유효성 검사
        function validateServerData(data) {
            if (!data.serverName) {
                alert('서버명을 입력해주세요.');
                document.getElementById('serverName').focus();
                return false;
            }
            
            if (!data.serverId) {
                alert('서버 ID를 입력해주세요.');
                document.getElementById('serverId').focus();
                return false;
            }
            
            if (!data.endpoint) {
                alert('엔드포인트를 입력해주세요.');
                document.getElementById('endpoint').focus();
                return false;
            }
            
            if (!data.port || isNaN(data.port)) {
                alert('올바른 포트 번호를 입력해주세요.');
                document.getElementById('port').focus();
                return false;
            }
            
            return true;
        }

        // 상세 폼 필드 업데이트
        function updateDetailFormFields() {
            const detailFields = document.getElementById('detailFields');
            
            if (!currentTab) {
                detailFields.innerHTML = '';
                return;
            }
            
            const fields = formFields[currentTab];
            detailFields.innerHTML = fields.map(field => {
                const required = field.required ? '<span class="required">*</span>' : '';
                let inputHtml = '';
                
                switch (field.type) {
                    case 'text':
                    case 'number':
                        inputHtml = `<input type="${field.type}" class="form-control" id="detail_${field.name}" ${field.required ? 'required' : ''} ${field.defaultValue ? `value="${field.defaultValue}"` : ''}>`;
                        break;
                    case 'textarea':
                        inputHtml = `<textarea class="form-control" id="detail_${field.name}" rows="3"></textarea>`;
                        break;
                    case 'select':
                        const options = field.options ? field.options.map(opt => 
                            `<option value="${opt.value}">${opt.label}</option>`
                        ).join('') : '';
                        inputHtml = `
                            <select class="form-select" id="detail_${field.name}" ${field.required ? 'required' : ''}>
                                <option value="">선택하세요</option>
                                ${options}
                            </select>
                        `;
                        break;
                    case 'radio':
                        const radioOptions = field.options ? field.options.map((opt, index) => 
                            `<label class="radio-label">
                                <input type="radio" name="detail_${field.name}" value="${opt.value}" ${index === 0 ? 'checked' : ''} ${field.required ? 'required' : ''}>
                                ${opt.label}
                            </label>`
                        ).join('') : '';
                        inputHtml = `<div class="radio-group">${radioOptions}</div>`;
                        break;
                    case 'checkbox':
                        inputHtml = `
                            <label class="checkbox-label">
                                <input type="checkbox" id="detail_${field.name}" value="1">
                                ${field.label}
                            </label>
                        `;
                        break;
                    case 'file':
                        inputHtml = `<input type="file" class="form-control" id="detail_${field.name}" accept=".zip" ${field.required ? 'required' : ''}>`;
                        break;
                }
                
                return `
                    <div class="form-group">
                        <label class="form-label">${field.label} ${required}</label>
                        ${inputHtml}
                    </div>
                `;
            }).join('');
        }

        // 상세 항목 저장
        function saveDetailItem() {
            const fields = formFields[currentTab];
            const newItem = {
                no: sampleData[currentTab].length + 1,
                regDate: new Date().toISOString().split('T')[0] + ' ' + new Date().toTimeString().split(' ')[0],
                updateDate: new Date().toISOString().split('T')[0] + ' ' + new Date().toTimeString().split(' ')[0]
            };
            
            // 필드 값 수집
            for (const field of fields) {
                const element = document.getElementById(`detail_${field.name}`);
                if (element) {
                    if (field.type === 'radio') {
                        const radioElement = document.querySelector(`input[name="detail_${field.name}"]:checked`);
                        if (radioElement) {
                            newItem[field.name] = radioElement.value;
                        } else if (field.required) {
                            alert(`${field.label}을(를) 선택해주세요.`);
                            return;
                        }
                    } else if (field.type === 'checkbox') {
                        newItem[field.name] = element.checked ? 'Y' : 'N';
                    } else {
                        if (field.required && !element.value.trim()) {
                            alert(`${field.label}을(를) 입력해주세요.`);
                            return;
                        }
                        newItem[field.name] = element.value;
                    }
                }
            }
            
            // 데이터 추가
            sampleData[currentTab].push(newItem);
            
            // UI 업데이트
            loadTabData();
            updateStats();
            closeDetailModal();
            
            alert('항목이 성공적으로 등록되었습니다.');
        }

        // 폼 필드 업데이트
        function updateFormFields() {
            const itemType = document.getElementById('itemType').value;
            const dynamicFields = document.getElementById('dynamicFields');
            
            if (!itemType) {
                dynamicFields.innerHTML = '';
                return;
            }
            
            const fields = formFields[itemType];
            dynamicFields.innerHTML = fields.map(field => {
                const required = field.required ? '<span class="required">*</span>' : '';
                let inputHtml = '';
                
                switch (field.type) {
                    case 'text':
                    case 'number':
                        inputHtml = `<input type="${field.type}" class="form-control" id="${field.name}" ${field.required ? 'required' : ''} ${field.defaultValue ? `value="${field.defaultValue}"` : ''}>`;
                        break;
                    case 'textarea':
                        inputHtml = `<textarea class="form-control" id="${field.name}" rows="3"></textarea>`;
                        break;
                    case 'select':
                        const options = field.options ? field.options.map(opt => 
                            `<option value="${opt.value}">${opt.label}</option>`
                        ).join('') : '';
                        inputHtml = `
                            <select class="form-select" id="${field.name}" ${field.required ? 'required' : ''}>
                                <option value="">선택하세요</option>
                                ${options}
                            </select>
                        `;
                        break;
                    case 'radio':
                        const radioOptions = field.options ? field.options.map((opt, index) => 
                            `<label class="radio-label">
                                <input type="radio" name="${field.name}" value="${opt.value}" ${index === 0 ? 'checked' : ''} ${field.required ? 'required' : ''}>
                                ${opt.label}
                            </label>`
                        ).join('') : '';
                        inputHtml = `<div class="radio-group">${radioOptions}</div>`;
                        break;
                    case 'checkbox':
                        inputHtml = `
                            <label class="checkbox-label">
                                <input type="checkbox" id="${field.name}" value="1">
                                ${field.label}
                            </label>
                        `;
                        break;
                    case 'file':
                        inputHtml = `<input type="file" class="form-control" id="${field.name}" accept=".zip" ${field.required ? 'required' : ''}>`;
                        break;
                }
                
                return `
                    <div class="form-group">
                        <label class="form-label">${field.label} ${required}</label>
                        ${inputHtml}
                    </div>
                `;
            }).join('');
        }

        // 항목 저장
        function saveItem() {
            const itemType = document.getElementById('itemType').value;
            if (!itemType) {
                alert('항목 타입을 선택해주세요.');
                return;
            }
            
            const fields = formFields[itemType];
            const newItem = {
                id: generateId(itemType),
                regDate: new Date().toISOString().split('T')[0]
            };
            
            // 필드 값 수집
            for (const field of fields) {
                const element = document.getElementById(field.name);
                if (element) {
                    if (field.required && !element.value.trim()) {
                        alert(`${field.label}을(를) 입력해주세요.`);
                        return;
                    }
                    newItem[field.name] = element.value;
                }
            }
            
            // 데이터 추가
            sampleData[itemType + 's'].push(newItem);
            
            // UI 업데이트
            if (currentTab === itemType + 's') {
                loadTabData();
            }
            updateStats();
            closeUnifiedModal();
            
            alert('항목이 성공적으로 등록되었습니다.');
        }

        // ID 생성
        function generateId(type) {
            const prefixes = {
                service: 'SVC',
                speaker: 'SPK',
                channel: 'CHN',
                server: 'SVR'
            };
            const prefix = prefixes[type];
            const count = sampleData[type + 's'].length + 1;
            return prefix + String(count).padStart(3, '0');
        }

        // 항목 편집
        function editItem(id) {
            alert(`편집 기능: ${id}`);
        }

        // 항목 삭제
        function deleteItem(id) {
            if (confirm('정말로 이 항목을 삭제하시겠습니까?')) {
                const dataKey = currentTab;
                const index = sampleData[dataKey].findIndex(item => item.id === id);
                if (index > -1) {
                    sampleData[dataKey].splice(index, 1);
                    loadTabData();
                    updateStats();
                    alert('항목이 삭제되었습니다.');
                }
            }
        }

        // 검색
        function performSearch() {
            const searchTerm = document.getElementById('globalSearch').value.toLowerCase();
            if (!searchTerm.trim()) {
                loadTabData();
                return;
            }
            
            const filtered = sampleData[currentTab].filter(item => 
                Object.values(item).some(value => 
                    String(value).toLowerCase().includes(searchTerm)
                )
            );
            
            currentData = filtered;
            currentPage = 1;
            renderTable();
            renderPagination();
        }

        // 검색 초기화
        function resetSearch() {
            document.getElementById('globalSearch').value = '';
            loadTabData();
        }

        // 모달 외부 클릭시 닫기
        // 배포 모달 관련 함수들
        function openDeployModal() {
            if (currentTab === 'services') {
                openServiceDeployModal();
            } else if (currentTab === 'speakers') {
                openSpeakerDeployModal();
            } else if (currentTab === 'channels') {
                openChannelDeployModal();
            }
        }

        // 서비스 배포 모달 열기
        function openServiceDeployModal() {
            const deployModal = document.getElementById('deployModal');
            deployModal.style.display = 'block';
            loadServiceDeployItems();
        }

        // 스피커 배포 모달 열기
        function openSpeakerDeployModal() {
            const speakerDeployModal = document.getElementById('speakerDeployModal');
            speakerDeployModal.style.display = 'block';
            loadSpeakerDeployItems();
        }

        // 채널 배포 모달 열기
        function openChannelDeployModal() {
            const channelDeployModal = document.getElementById('channelDeployModal');
            channelDeployModal.style.display = 'block';
            loadChannelDeployItems();
        }

        function closeDeployModal() {
            document.getElementById('deployModal').style.display = 'none';
        }

        // 스피커 배포 모달 닫기
        function closeSpeakerDeployModal() {
            document.getElementById('speakerDeployModal').style.display = 'none';
        }

        // 채널 배포 모달 닫기
        function closeChannelDeployModal() {
            document.getElementById('channelDeployModal').style.display = 'none';
        }

        // 서비스 배포 아이템 로드
        function loadServiceDeployItems() {
            const deployItems = document.getElementById('deployItems');
            if (!deployItems) return;

            // 임시 서비스 데이터
            const tempServices = [
                { no: 1, name: '정제스트', language: '한국어', deployStatus: '배포완료' },
                { no: 2, name: '테스트서비스', language: '한국어', deployStatus: '배포완료' },
                { no: 3, name: '테스트2', language: '한국어', deployStatus: '미배포' },
                { no: 4, name: '테스트3', language: '영어', deployStatus: '미배포' },
                { no: 5, name: '테스트4', language: '중국어', deployStatus: '배포완료' },
                { no: 6, name: '테스트5', language: '일본어', deployStatus: '배포완료' }
            ];

            const items = tempServices.map(service => `
                <div class="deploy-item" onclick="toggleDeployItem(this)">
                    <input type="checkbox" id="deploy-${service.no}">
                    <div class="deploy-item-info">
                        <div class="deploy-item-name">${service.name}</div>
                        <div class="deploy-item-details">언어: ${service.language}, 상태: ${service.deployStatus}</div>
                    </div>
                    <button class="deploy-ready-btn">배포 준비</button>
                </div>
            `).join('');

            deployItems.innerHTML = items;
        }

        // 스피커 배포 아이템 로드
        function loadSpeakerDeployItems() {
            const deployItems = document.getElementById('speakerDeployItems');
            if (!deployItems) return;

            // 임시 스피커 데이터
            const tempSpeakers = [
                { no: 1, speakerCode: '다솜힘을', speakerType: '기본', service: '테스트서비스', speakerId: '3001', language: '한국어' },
                { no: 2, speakerCode: '432', speakerType: '기본', service: '정제스트', speakerId: '3002', language: '한국어' },
                { no: 3, speakerCode: 'Voice001', speakerType: '특화', service: '테스트2', speakerId: '3003', language: '영어' },
                { no: 4, speakerCode: '음성002', speakerType: '기본', service: '테스트3', speakerId: '3004', language: '중국어' }
            ];

            const items = tempSpeakers.map(speaker => `
                <div class="deploy-item" onclick="toggleDeployItem(this)">
                    <input type="radio" name="speakerDeploy" id="speaker-deploy-${speaker.no}">
                    <div class="deploy-item-info">
                        <div class="deploy-item-name">${speaker.speakerCode}</div>
                        <div class="deploy-item-details">타입: ${speaker.speakerType}, 서비스: ${speaker.service}<br>스피커코드: ${speaker.speakerId}, 언어: ${speaker.language}</div>
                    </div>
                    <button class="deploy-ready-btn">배포 준비</button>
                </div>
            `).join('');

            deployItems.innerHTML = items;
        }

        // 채널 배포 아이템 로드
        function loadChannelDeployItems() {
            const deployItems = document.getElementById('channelDeployItems');
            if (!deployItems) return;

            // 임시 채널 데이터
            const tempChannels = [
                { no: 1, channelName: '123', service: '정제스트', channelId: '12', language: '한국어', statsExposure: 'Y' },
                { no: 2, channelName: '11', service: '정제스트', channelId: '11', language: '한국어', statsExposure: 'Y' },
                { no: 3, channelName: 'Channel001', service: '테스트서비스', channelId: '13', language: '영어', statsExposure: 'N' },
                { no: 4, channelName: '채널002', service: '테스트2', channelId: '14', language: '중국어', statsExposure: 'Y' }
            ];

            const items = tempChannels.map(channel => `
                <div class="deploy-item" onclick="toggleDeployItem(this)">
                    <input type="radio" name="channelDeploy" id="channel-deploy-${channel.no}">
                    <div class="deploy-item-info">
                        <div class="deploy-item-name">${channel.channelName}</div>
                        <div class="deploy-item-details">채널명: ${channel.channelName}, 서비스: ${channel.service}<br>언어: ${channel.language}, 통계 노출: ${channel.statsExposure}</div>
                    </div>
                    <button class="deploy-ready-btn">배포 준비</button>
                </div>
            `).join('');

            deployItems.innerHTML = items;
        }

        function updateDeployItems() {
            const deployItems = document.getElementById('deployItems');
            const currentData = sampleData[currentTab] || [];
            
            if (currentData.length === 0) {
                deployItems.innerHTML = '<div style="text-align: center; padding: 20px; color: #6b7280;">배포 가능한 항목이 없습니다.</div>';
                return;
            }
            
            deployItems.innerHTML = currentData.map(item => `
                <div class="deploy-item" onclick="toggleDeployItem(this)">
                    <input type="checkbox" id="deploy-${item.no}">
                    <div class="deploy-item-info">
                        <div class="deploy-item-name">${item.name || item.serverName || item.channelName || item.speakerCode}</div>
                        <div class="deploy-item-details">
                            ${currentTab === 'services' ? `언어: ${item.language}, 상태: ${item.deployStatus}` : 
                              currentTab === 'speakers' ? `타입: ${item.speakerType}, 서비스: ${item.service}` :
                              currentTab === 'channels' ? `ID: ${item.channelId}, 서비스: ${item.service}` :
                              `ID: ${item.serverId}, 타입: ${item.serverType}`}
                        </div>
                    </div>
                    <button class="deploy-ready-btn">배포 준비</button>
                </div>
            `).join('');
        }

        function toggleDeployItem(element) {
            // 라디오 버튼인 경우 다른 항목들 해제
            const radioButtons = element.querySelectorAll('input[type="radio"]');
            if (radioButtons.length > 0) {
                const name = radioButtons[0].name;
                document.querySelectorAll(`input[name="${name}"]`).forEach(radio => {
                    radio.closest('.deploy-item').classList.remove('selected');
                });
            }
            
            element.classList.toggle('selected');
            const input = element.querySelector('input[type="checkbox"], input[type="radio"]');
            if (input) {
                input.checked = !input.checked;
            }
        }

        function validateDeployment() {
            const selectedItems = document.querySelectorAll('.deploy-checkbox:checked');
            const environment = document.getElementById('deployEnvironment').value;
            const deployType = document.getElementById('deployType').value;
            
            if (selectedItems.length === 0) {
                alert('배포할 항목을 선택해주세요.');
                return;
            }
            
            if (!environment || !deployType) {
                alert('배포 환경과 배포 유형을 선택해주세요.');
                return;
            }
            
            const itemNames = Array.from(selectedItems).map(cb => {
                const item = cb.closest('.deploy-item');
                return item.querySelector('.deploy-item-name').textContent;
            });
            
            alert(`배포 검증 완료!\n\n선택된 항목: ${itemNames.join(', ')}\n배포 환경: ${environment}\n배포 유형: ${deployType}\n\n배포를 진행하시겠습니까?`);
        }

        function startDeployment() {
            const selectedItems = document.querySelectorAll('.deploy-item.selected');
            if (selectedItems.length === 0) {
                alert('배포할 서비스를 선택해주세요.');
                return;
            }
            
            const itemNames = Array.from(selectedItems).map(item => 
                item.querySelector('.deploy-item-name').textContent
            ).join(', ');

            alert(`다음 서비스들이 배포됩니다:\n${itemNames}`);
            closeDeployModal();
        }

        // 스피커 배포 시작
        function startSpeakerDeployment() {
            const selectedItems = document.querySelectorAll('.deploy-item.selected');
            if (selectedItems.length === 0) {
                alert('배포할 스피커를 선택해주세요.');
                return;
            }
            
            const itemNames = Array.from(selectedItems).map(item => 
                item.querySelector('.deploy-item-name').textContent
            ).join(', ');

            alert(`다음 스피커들이 배포됩니다:\n${itemNames}`);
            closeSpeakerDeployModal();
        }

        // 채널 배포 시작
        function startChannelDeployment() {
            const selectedItems = document.querySelectorAll('.deploy-item.selected');
            if (selectedItems.length === 0) {
                alert('배포할 채널을 선택해주세요.');
                return;
            }

            const itemNames = Array.from(selectedItems).map(item => 
                item.querySelector('.deploy-item-name').textContent
            ).join(', ');

            alert(`다음 채널들이 배포됩니다:\n${itemNames}`);
            closeChannelDeployModal();
        }

        window.onclick = function(event) {
            const quickDeployModal = document.getElementById('quickDeployModal');
            const detailModal = document.getElementById('detailModal');
            const deployModal = document.getElementById('deployModal');
            const speakerDeployModal = document.getElementById('speakerDeployModal');
            const channelDeployModal = document.getElementById('channelDeployModal');
            
            if (event.target === quickDeployModal) {
                closeQuickDeployModal();
            } else if (event.target === detailModal) {
                closeDetailModal();
            } else if (event.target === deployModal) {
                closeDeployModal();
            } else if (event.target === speakerDeployModal) {
                closeSpeakerDeployModal();
            } else if (event.target === channelDeployModal) {
                closeChannelDeployModal();
            }
        }

        // 상세 관리 화면으로 이동
        function goToDetailView() {
            console.log('goToDetailView 호출됨');
            console.log('selectedEntity:', selectedEntity);
            console.log('selectedEntityType:', selectedEntityType);
            
            // 현재 선택된 엔티티가 있는지 확인
            if (!selectedEntity || !selectedEntityType) {
                alert('먼저 테이블에서 엔티티를 선택해주세요.');
                return;
            }
            
            console.log('엔티티 선택됨, 모달 열기 시작');
            
            // 엔티티 가시성 상태 초기화
            detailEntityVisibility = {
                services: true,
                speakers: true,
                channels: true,
                servers: true
            };
            
            // 버튼 상태 초기화
            resetButtonStates();
            
            // 선택된 엔티티 정보 표시
            displaySelectedEntityInfo();
            
            // D3.js 다이어그램 초기화 및 표시
            initializeConnectionDiagram();
            
            // 모달 열기
            const modalElement = document.getElementById('connectionDetailModal');
            console.log('모달 요소:', modalElement);
            
            if (modalElement) {
                const modal = new bootstrap.Modal(modalElement);
                console.log('Bootstrap 모달 생성됨:', modal);
                modal.show();
                console.log('모달 show() 호출됨');
            } else {
                console.error('모달 요소를 찾을 수 없습니다!');
                alert('모달 요소를 찾을 수 없습니다.');
            }
        }

        // 선택된 엔티티 정보 표시
        function displaySelectedEntityInfo() {
            console.log('displaySelectedEntityInfo 호출됨');
            console.log('selectedEntity:', selectedEntity);
            console.log('selectedEntityType:', selectedEntityType);
            
            const entityInfoDiv = document.getElementById('selectedEntityInfo');
            if (!entityInfoDiv) {
                console.error('selectedEntityInfo 요소를 찾을 수 없습니다!');
                return;
            }
            
            if (!selectedEntity || !selectedEntityType) {
                console.log('selectedEntity 또는 selectedEntityType이 없음');
                entityInfoDiv.innerHTML = '<p>선택된 엔티티가 없습니다.</p>';
                return;
            }
            
            console.log('displaySelectedEntityInfo - selectedEntity:', selectedEntity);
            console.log('displaySelectedEntityInfo - selectedEntityType:', selectedEntityType);
            
            // 엔티티 이름 가져오기
            let entityName = '';
            if (selectedEntityType === 'services') {
                entityName = selectedEntity.name || 'N/A';
                console.log('서비스 이름:', entityName);
            } else if (selectedEntityType === 'speakers') {
                entityName = selectedEntity.speakerCode || 'N/A';
                console.log('스피커 코드:', entityName);
            } else if (selectedEntityType === 'channels') {
                entityName = selectedEntity.channelName || 'N/A';
                console.log('채널 이름:', entityName);
            } else if (selectedEntityType === 'servers') {
                entityName = selectedEntity.serverName || 'N/A';
                console.log('서버 이름:', entityName);
            }
            
            let infoHtml = `
                <div class="entity-detail">
                    <h6>${getEntityTypeName(selectedEntityType)}</h6>
                    <p><strong>이름:</strong> ${entityName}</p>
            `;
            
            // 엔티티 타입별 추가 정보
            if (selectedEntityType === 'services') {
                infoHtml += `<p><strong>언어:</strong> ${selectedEntity.language || 'N/A'}</p>`;
            } else if (selectedEntityType === 'speakers') {
                infoHtml += `<p><strong>스피커 ID:</strong> ${selectedEntity.speakerId || 'N/A'}</p>`;
                infoHtml += `<p><strong>타입:</strong> ${selectedEntity.speakerType || 'N/A'}</p>`;
            } else if (selectedEntityType === 'channels') {
                infoHtml += `<p><strong>채널 ID:</strong> ${selectedEntity.channelId || 'N/A'}</p>`;
                infoHtml += `<p><strong>언어:</strong> ${selectedEntity.language || 'N/A'}</p>`;
            } else if (selectedEntityType === 'servers') {
                infoHtml += `<p><strong>서버 ID:</strong> ${selectedEntity.serverId || 'N/A'}</p>`;
                infoHtml += `<p><strong>상태:</strong> ${selectedEntity.status || 'N/A'}</p>`;
            }
            
            infoHtml += `</div>`;
            console.log('생성된 HTML:', infoHtml);
            entityInfoDiv.innerHTML = infoHtml;
            console.log('HTML 업데이트 완료');
        }

        // 엔티티 타입명 반환
        function getEntityTypeName(type) {
            const typeNames = {
                'services': '서비스',
                'speakers': '스피커',
                'channels': '채널',
                'servers': '서버'
            };
            return typeNames[type] || type;
        }

        // D3.js 연결 다이어그램 초기화
        function initializeConnectionDiagram() {
            console.log('initializeConnectionDiagram 호출됨');
            
            // D3.js가 로드되었는지 확인
            if (typeof d3 === 'undefined') {
                console.warn('D3.js가 로드되지 않았습니다.');
                return;
            }
            
            const svg = d3.select("#connectionDetailSvg");
            svg.selectAll("*").remove();
            
            const width = 800;
            const height = 500;
            
            svg.attr("viewBox", `0 0 ${width} ${height}`)
                .attr("width", "100%")
                .attr("height", "100%");
            
            // 노드와 링크 데이터 생성
            const { nodes, links } = generateConnectionData();
            
            // 가시성에 따라 노드 필터링
            const filteredNodes = nodes.filter(node => detailEntityVisibility[node.type]);
            
            // 필터링된 노드 ID 집합 생성
            const visibleNodeIds = new Set(filteredNodes.map(node => node.id));
            
            // 가시성에 따라 링크 필터링
            const filteredLinks = links.filter(link => {
                const sourceId = typeof link.source === 'object' ? link.source.id : link.source;
                const targetId = typeof link.target === 'object' ? link.target.id : link.target;
                return visibleNodeIds.has(sourceId) && visibleNodeIds.has(targetId);
            });
            
            if (filteredNodes.length === 0) {
                console.log('표시할 노드가 없습니다.');
                return;
            }
            
            // 시뮬레이션 설정
            const simulation = d3.forceSimulation(filteredNodes)
                .force("link", d3.forceLink(filteredLinks).id(d => d.id).distance(120))
                .force("charge", d3.forceManyBody().strength(-400))
                .force("center", d3.forceCenter(width / 2, height / 2))
                .force("collision", d3.forceCollide().radius(50));
            
            // 링크 그리기
            const link = svg.append("g")
                .selectAll("line")
                .data(filteredLinks)
                .enter().append("line")
                .attr("class", "link")
                .attr("stroke", "#999")
                .attr("stroke-opacity", 0.6)
                .attr("stroke-width", 2);
            
            // 노드 그리기
            const node = svg.append("g")
                .selectAll("g")
                .data(filteredNodes)
                .enter().append("g")
                .attr("class", d => `node ${d.type}`)
                .attr("data-type", d => d.type)
                .call(d3.drag()
                    .on("start", dragstarted)
                    .on("drag", dragged)
                    .on("end", dragended));
            
            // 원형 노드 추가
            node.append("ellipse")
                .attr("rx", d => d.isCenter ? 50 : 40)
                .attr("ry", d => d.isCenter ? 30 : 25)
                .attr("fill", d => {
                    if (d.type === 'channels' || d.type === 'channel') {
                        return getNodeColor(d.type) + '4D'; // 30% 투명도 (4D = 30%)
                    }
                    return getNodeColor(d.type);
                })
                .attr("stroke", d => getNodeColor(d.type))
                .attr("stroke-width", d => d.isCenter ? 3 : 2);
            
            // 텍스트 추가
            node.append("text")
                .attr("dy", 5)
                .attr("text-anchor", "middle")
                .attr("font-size", d => d.isCenter ? "20px" : "18px")
                .attr("font-weight", "700")
                .attr("fill", d => d.type === 'channels' || d.type === 'channel' ? "black" : "white")
                .attr("text-shadow", d => d.type === 'channels' || d.type === 'channel' ? "2px 2px 4px rgba(255,255,255,0.9)" : "2px 2px 4px rgba(0,0,0,0.7)")
                .text(d => d.name);
            
            // 시뮬레이션 업데이트
            simulation.on("tick", () => {
                link
                    .attr("x1", d => d.source.x)
                    .attr("y1", d => d.source.y)
                    .attr("x2", d => d.target.x)
                    .attr("y2", d => d.target.y);
                
                node
                    .attr("transform", d => {
                        // 경계 체크
                        d.x = Math.max(50, Math.min(width - 50, d.x));
                        d.y = Math.max(50, Math.min(height - 50, d.y));
                        return `translate(${d.x},${d.y})`;
                    });
            });
            
            // 드래그 함수들
            function dragstarted(event, d) {
                if (!event.active) simulation.alphaTarget(0.3).restart();
                d.fx = d.x;
                d.fy = d.y;
            }
            
            function dragged(event, d) {
                d.fx = event.x;
                d.fy = event.y;
            }
            
            function dragended(event, d) {
                if (!event.active) simulation.alphaTarget(0);
                d.fx = null;
                d.fy = null;
            }
        }

        // 연결 데이터 생성
        function generateConnectionData() {
            console.log('generateConnectionData 호출됨');
            console.log('selectedEntity:', selectedEntity);
            console.log('selectedEntityType:', selectedEntityType);
            
            if (!selectedEntity || !selectedEntityType) {
                console.log('selectedEntity 또는 selectedEntityType이 없음, 빈 데이터 반환');
                return { nodes: [], links: [] };
            }
            
            const nodes = [];
            const links = [];
            const nodeMap = new Map();
            
            // 선택된 엔티티의 이름 가져오기
            let entityName = '';
            if (selectedEntityType === 'services') {
                entityName = selectedEntity.name || 'N/A';
            } else if (selectedEntityType === 'speakers') {
                entityName = selectedEntity.speakerCode || 'N/A';
            } else if (selectedEntityType === 'channels') {
                entityName = selectedEntity.channelName || 'N/A';
            } else if (selectedEntityType === 'servers') {
                entityName = selectedEntity.serverName || 'N/A';
            }
            
            console.log('엔티티 이름:', entityName);
            
            // 선택된 엔티티를 중앙 노드로 추가
            const centerNode = {
                id: entityName,
                name: entityName,
                type: selectedEntityType,
                isCenter: true
            };
            nodes.push(centerNode);
            nodeMap.set(centerNode.id, centerNode);
            
            console.log('중앙 노드:', centerNode);
            
            // 연결된 엔티티들 추가
            const connections = connectionData[selectedEntityType] && connectionData[selectedEntityType][entityName];
            console.log('연결 정보:', connections);
            console.log('connectionData 전체:', connectionData);
            
            if (connections) {
                Object.keys(connections).forEach(targetType => {
                    const connectedIds = connections[targetType];
                    console.log(`${targetType} 연결된 ID들:`, connectedIds);
                    
                    connectedIds.forEach(targetId => {
                        // 타겟 노드 추가
                        if (!nodeMap.has(targetId)) {
                            const targetNode = {
                                id: targetId,
                                name: targetId,
                                type: targetType, // 'speakers', 'channels', 'servers' 그대로 사용
                                isCenter: false
                            };
                            nodes.push(targetNode);
                            nodeMap.set(targetId, targetNode);
                            console.log('타겟 노드 추가:', targetNode);
                        }
                        
                        // 링크 추가
                        links.push({
                            source: centerNode.id,
                            target: targetId
                        });
                        console.log('링크 추가:', centerNode.id, '->', targetId);
                    });
                });
            } else {
                console.log('연결 정보가 없습니다. connectionData 확인:', connectionData);
            }
            
            console.log('최종 노드들:', nodes);
            console.log('최종 링크들:', links);
            
            return { nodes, links };
        }

        // 노드 색상 반환
        function getNodeColor(type) {
            const colors = {
                'services': '#3b82f6',
                'speakers': '#8b5cf6',
                'channels': '#f59e0b',
                'servers': '#ef4444'
            };
            return colors[type] || '#666';
        }

        // 노드 타입 토글
        function toggleNodeType(type) {
            console.log('toggleNodeType 호출됨:', type);
            
            // 가시성 상태 토글
            detailEntityVisibility[type] = !detailEntityVisibility[type];
            
            // 버튼 스타일 업데이트
            const button = document.getElementById(`toggle-${type}`);
            if (button) {
                if (detailEntityVisibility[type]) {
                    button.classList.remove('btn-outline-secondary');
                    button.classList.add('btn-outline-primary');
                } else {
                    button.classList.remove('btn-outline-primary');
                    button.classList.add('btn-outline-secondary');
                }
            }
            
            // 다이어그램 다시 그리기
            initializeConnectionDiagram();
        }

        // 다이어그램 초기화
        function resetDiagram() {
            console.log('resetDiagram 호출됨');
            initializeConnectionDiagram();
        }
        
        // 버튼 상태 초기화
        function resetButtonStates() {
            console.log('resetButtonStates 호출됨');
            
            const buttonTypes = ['services', 'speakers', 'channels', 'servers'];
            
            buttonTypes.forEach(type => {
                const button = document.getElementById(`toggle-${type}`);
                if (button) {
                    // 모든 클래스 제거
                    button.classList.remove('btn-outline-primary', 'btn-outline-secondary');
                    // 기본 상태로 설정 (활성 상태)
                    button.classList.add('btn-outline-primary');
                }
            });
        }

        // 다이어그램 중앙정렬
        function centerDiagram() {
            // 중앙정렬 로직 추가
        }

        // 상세보기 함수
        function showDetailView(entityId, tabType) {
            console.log('showDetailView 호출됨:', entityId, tabType);
            
            // 현재 탭의 데이터에서 해당 엔티티 찾기
            const entity = currentData.find(item => {
                if (tabType === 'services') {
                    return item.name === entityId;
                } else if (tabType === 'speakers') {
                    return item.speakerCode === entityId;
                } else if (tabType === 'channels') {
                    return item.channelName === entityId;
                } else if (tabType === 'servers') {
                    return item.serverName === entityId;
                }
                return false;
            });
            
            if (!entity) {
                console.error('엔티티를 찾을 수 없습니다:', entityId);
                alert('엔티티를 찾을 수 없습니다.');
                return;
            }
            
            console.log('찾은 엔티티:', entity);
            
            // 선택된 엔티티 설정
            selectedEntity = entity;
            selectedEntityType = tabType;
            
            // 연결 관계 다이어그램 모달 열기
            goToDetailView();
        }

        // 수정 모달 열기 함수
        function openEditModal(entityId, tabType) {
            console.log('openEditModal 호출됨:', entityId, tabType);
            
            // 현재 탭의 데이터에서 해당 엔티티 찾기
            const entity = currentData.find(item => {
                if (tabType === 'services') {
                    return item.name === entityId;
                } else if (tabType === 'speakers') {
                    return item.speakerCode === entityId;
                } else if (tabType === 'channels') {
                    return item.channelName === entityId;
                } else if (tabType === 'servers') {
                    return item.serverName === entityId;
                }
                return false;
            });
            
            if (!entity) {
                console.error('엔티티를 찾을 수 없습니다:', entityId);
                alert('엔티티를 찾을 수 없습니다.');
                return;
            }
            
            console.log('수정할 엔티티:', entity);
            
            // 현재 탭 설정
            currentTab = tabType;
            
            // 모달 열기
            openDetailModal();
            
            // 폼에 데이터 채우기
            fillEditForm(entity, tabType);
        }

        // 수정 폼에 데이터 채우기
        function fillEditForm(entity, tabType) {
            console.log('fillEditForm 호출됨:', entity, tabType);
            
            if (tabType === 'services') {
                fillServiceEditForm(entity);
            } else if (tabType === 'speakers') {
                fillSpeakerEditForm(entity);
            } else if (tabType === 'channels') {
                fillChannelEditForm(entity);
            } else if (tabType === 'servers') {
                fillServerEditForm(entity);
            }
        }

        // 서비스 수정 폼 채우기
        function fillServiceEditForm(entity) {
            document.getElementById('serviceName').value = entity.name || '';
            document.querySelector(`input[name="language"][value="${entity.language}"]`).checked = true;
            document.querySelector('input[name="phraseUse"]').checked = entity.phraseUse === 'Y';
            document.querySelector('input[name="cacheUse"]').checked = entity.cacheUse === 'Y';
            document.getElementById('sampleRate').value = entity.sampleRate || '';
            document.getElementById('bitPerSample').value = entity.bitPerSample || '';
            document.getElementById('channel').value = entity.channel || '';
            document.getElementById('serviceDescription').value = entity.description || '';
        }

        // 스피커 수정 폼 채우기
        function fillSpeakerEditForm(entity) {
            document.querySelector(`input[name="speakerType"][value="${entity.speakerType}"]`).checked = true;
            document.getElementById('speakerCode').value = entity.speakerCode || '';
            document.getElementById('speakerId').value = entity.speakerId || '';
            document.getElementById('speakerService').value = entity.service || '';
            document.querySelector(`input[name="speakerLanguage"][value="${entity.language}"]`).checked = true;
            document.getElementById('speakerVersion').value = entity.version || '';
            document.getElementById('systemAdmin').value = entity.systemAdmin || '';
            document.getElementById('useAdmin').value = entity.useAdmin || '';
        }

        // 채널 수정 폼 채우기
        function fillChannelEditForm(entity) {
            document.getElementById('channelName').value = entity.channelName || '';
            document.getElementById('channelId').value = entity.channelId || '';
            document.getElementById('channelService').value = entity.service || '';
            document.querySelector(`input[name="channelLanguage"][value="${entity.language}"]`).checked = true;
            document.querySelector('input[name="statsExposure"]').checked = entity.statsExposure === 'Y';
        }

        // 서버 수정 폼 채우기
        function fillServerEditForm(entity) {
            document.querySelector(`input[name="serverType"][value="${entity.serverType}"]`).checked = true;
            document.getElementById('serverName').value = entity.serverName || '';
            document.getElementById('serverId').value = entity.serverId || '';
            document.getElementById('serverService').value = entity.service || '';
            document.querySelector(`input[name="serverLanguage"][value="${entity.language}"]`).checked = true;
            document.getElementById('endpoint').value = entity.endpoint || '';
            document.getElementById('serverPort').value = entity.serverPort || '';
            document.querySelector('input[name="useStatus"]').checked = entity.useStatus === 'Y';
        }

        // 테스트용 모달 열기 함수
        function testModal() {
            console.log('testModal 호출됨');
            const modalElement = document.getElementById('connectionDetailModal');
            console.log('모달 요소:', modalElement);
            
            if (modalElement) {
                // 테스트용 선택된 엔티티 설정
                selectedEntity = {
                    name: '정제스트3',
                    language: '한국어'
                };
                selectedEntityType = 'services';
                
                // 선택된 엔티티 정보 표시
                displaySelectedEntityInfo();
                
                // D3.js 다이어그램 초기화
                initializeConnectionDiagram();
                
                const modal = new bootstrap.Modal(modalElement);
                modal.show();
                console.log('테스트 모달 열림');
            } else {
                console.error('모달 요소를 찾을 수 없습니다!');
            }
        }

        // 서비스명 입력 시 자동 값 생성
        document.addEventListener('DOMContentLoaded', function() {
            const quickServiceNameInput = document.getElementById('quickServiceName');
            if (quickServiceNameInput) {
                quickServiceNameInput.addEventListener('input', function() {
                    if (quickCurrentStep === 2) {
                        generateQuickAutoValues();
                    }
                });
            }
        });

        // Enter 키로 검색
        document.getElementById('globalSearch').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                performSearch();
            }
        });

        // 전체 선택/해제
        function toggleSelectAll() {
            const selectAll = document.getElementById('selectAll');
            const checkboxes = document.querySelectorAll('.row-checkbox');
            
            if (!selectAll) {
                console.error('selectAll 요소를 찾을 수 없습니다.');
                return;
            }
            
            checkboxes.forEach(checkbox => {
                checkbox.checked = selectAll.checked;
            });
        }

        // 선택된 항목 삭제
        function deleteSelected() {
            const selectedCheckboxes = document.querySelectorAll('.row-checkbox:checked');
            const selectedIds = Array.from(selectedCheckboxes).map(cb => cb.dataset.id);
            
            if (selectedIds.length === 0) {
                alert('삭제할 항목을 선택해주세요.');
                return;
            }
            
            if (confirm(`선택된 ${selectedIds.length}개 항목을 삭제하시겠습니까?`)) {
                // 실제 삭제 로직 구현
                selectedIds.forEach(id => {
                    const index = sampleData[currentTab].findIndex(item => (item.no || item.id) == id);
                    if (index > -1) {
                        sampleData[currentTab].splice(index, 1);
                    }
                });
                
                loadTabData();
                updateStats();
                alert(`${selectedIds.length}개 항목이 삭제되었습니다.`);
            }
        }

        // 서비스 연결 관리 모달 열기
        function openConnectModal() {
            console.log('연결하기 버튼 클릭됨');
            const modal = document.getElementById('connectModal');
            console.log('모달 요소:', modal);
            if (modal) {
                modal.style.display = 'block';
                console.log('모달 표시됨');
            } else {
                console.error('connectModal 요소를 찾을 수 없습니다');
            }
        }

        // 서비스 연결 관리 모달 닫기
        function closeConnectModal() {
            document.getElementById('connectModal').style.display = 'none';
        }

        // 배포 관련 함수들
        function hasAllComponents(service) {
            const serviceName = service.name;
            const speakers = sampleData.speakers.filter(item => item.service === serviceName);
            const channels = sampleData.channels.filter(item => item.service === serviceName);
            const servers = sampleData.servers.filter(item => item.service === serviceName);
            
            return speakers.length > 0 && channels.length > 0 && servers.length > 0;
        }

        function deployService(serviceName) {
            const service = sampleData.services.find(item => item.name === serviceName);
            if (!service) {
                alert('서비스를 찾을 수 없습니다.');
                return;
            }

            if (!hasAllComponents(service)) {
                const speakers = sampleData.speakers.filter(item => item.service === serviceName);
                const channels = sampleData.channels.filter(item => item.service === serviceName);
                const servers = sampleData.servers.filter(item => item.service === serviceName);
                
                let missing = [];
                if (speakers.length === 0) missing.push('스피커');
                if (channels.length === 0) missing.push('채널');
                if (servers.length === 0) missing.push('서버');
                
                alert(`배포할 수 없습니다. 다음 구성 요소가 필요합니다: ${missing.join(', ')}`);
                return;
            }

            if (confirm(`'${serviceName}' 서비스를 배포하시겠습니까?`)) {
                // 배포 시뮬레이션
                service.deployStatus = '배포완료';
                loadTabData();
                alert(`'${serviceName}' 서비스가 성공적으로 배포되었습니다.`);
            }
        }

        function showDeployOverview() {
            let overview = '=== 배포 가능 서비스 현황 ===\\n\\n';
            
            sampleData.services.forEach(service => {
                const speakers = sampleData.speakers.filter(item => item.service === service.name);
                const channels = sampleData.channels.filter(item => item.service === service.name);
                const servers = sampleData.servers.filter(item => item.service === service.name);
                
                overview += `${service.name}:\\n`;
                overview += `  - 배포 상태: ${service.deployStatus}\\n`;
                overview += `  - 스피커: ${speakers.length}개\\n`;
                overview += `  - 채널: ${channels.length}개\\n`;
                overview += `  - 서버: ${servers.length}개\\n`;
                overview += `  - 배포 가능: ${hasAllComponents(service) ? 'YES' : 'NO'}\\n\\n`;
            });
            
            alert(overview);
        }
    </script>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>

    <!-- 연결상세보기 팝업 모달 -->
    <div id="connectionDetailModal" class="modal fade" tabindex="-1" aria-labelledby="connectionDetailModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-xl">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="connectionDetailModalLabel">
                        <i class="fas fa-project-diagram"></i>
                        연결 관계 상세보기
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <!-- 선택된 엔티티 정보 (상단) -->
                    <div class="selected-entity-header">
                        <h6><i class="fas fa-info-circle"></i> 선택된 엔티티 정보</h6>
                        <div id="selectedEntityInfo" class="entity-info">
                            <!-- 선택된 엔티티 정보가 여기에 표시됩니다 -->
                        </div>
                    </div>
                    
                    <!-- 연결 관계 다이어그램 (하단) -->
                    <div class="connection-diagram-section">
                        <div class="diagram-controls">
                            <h6><i class="fas fa-project-diagram"></i> 연결 관계 다이어그램</h6>
                            <div class="control-group">
                                <button class="btn btn-sm btn-outline-primary" onclick="toggleNodeType('services')" id="toggle-services">
                                    <i class="fas fa-cog"></i> 서비스
                                </button>
                                <button class="btn btn-sm btn-outline-primary" onclick="toggleNodeType('speakers')" id="toggle-speakers">
                                    <i class="fas fa-volume-up"></i> 스피커
                                </button>
                                <button class="btn btn-sm btn-outline-primary" onclick="toggleNodeType('channels')" id="toggle-channels">
                                    <i class="fas fa-broadcast-tower"></i> 채널
                                </button>
                                <button class="btn btn-sm btn-outline-primary" onclick="toggleNodeType('servers')" id="toggle-servers">
                                    <i class="fas fa-server"></i> 서버
                                </button>
                                <button class="btn btn-sm btn-outline-secondary" onclick="resetDiagram()">
                                    <i class="fas fa-undo"></i> 초기화
                                </button>
                            </div>
                        </div>
                        <div class="diagram-area">
                            <svg id="connectionDetailSvg" width="100%" height="100%"></svg>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">닫기</button>
                </div>
            </div>
        </div>
    </div>

</body>
</html>
